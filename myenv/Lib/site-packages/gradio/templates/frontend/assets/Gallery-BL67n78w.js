import{u as ct,B as _t,d as Fe,E as mt,I as ht,j as Ge,k as Se,a as ue,b as dt,F as gt,S as bt,l as pt}from"./FullscreenButton-D7OpqaEU.js";import{M as wt,U as kt}from"./ModifyUpload-DeA0LoIt.js";import{I as ce}from"./Image-0bVIZe-w.js";import"./ImagePreview-AieVzSem.js";import{V as _e}from"./Video-NpeJCQXG.js";import{d as vt}from"./index-tFQomdd2.js";import"./index-BvFm9VBJ.js";import"./init-BXnIR-ED.js";import"./MarkdownCode-DhbjNcA6.js";import"./prism-python-Dt5iPx6n.js";import"./hls-C7-VjdhD.js";import"./svelte/svelte.js";async function yt(l){return l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([n,t])=>n===null||!n.url?"":await ct(n.url)))).map(n=>`<img src="${n}" style="height: 400px" />`).join("")}</div>`:""}const{SvelteComponent:zt,add_flush_callback:jt,add_render_callback:$t,append:N,attr:$,bind:Bt,binding_callbacks:ne,bubble:ae,check_outros:D,create_component:B,destroy_component:E,destroy_each:qe,detach:T,element:S,empty:me,ensure_array_like:ie,flush:j,globals:Et,group_outros:C,init:It,insert:U,is_function:Lt,listen:K,mount_component:I,noop:Mt,run_all:Tt,safe_not_equal:Ut,set_data:He,set_style:H,space:A,stop_propagation:Nt,text:Oe,toggle_class:F,transition_in:m,transition_out:g}=window.__gradio__svelte__internal,{window:Pe}=Et,{createEventDispatcher:Rt,onMount:Dt}=window.__gradio__svelte__internal,{tick:Ct}=window.__gradio__svelte__internal;function je(l,e,n){const t=l.slice();return t[63]=e[n],t[65]=n,t}function $e(l,e,n){const t=l.slice();return t[66]=e[n],t[67]=e,t[65]=n,t}function Be(l){let e,n;return e=new _t({props:{show_label:l[2],Icon:Fe,label:l[3]||"Gallery"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&4&&(o.show_label=t[2]),i[0]&8&&(o.label=t[3]||"Gallery"),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function At(l){let e,n,t,i,o,f,a=l[30]&&l[6]&&Ee(l),s=l[11]&&l[1]===null&&Re(l),h=ie(l[21]),u=[];for(let c=0;c<h.length;c+=1)u[c]=We(je(l,h,c));const p=c=>g(u[c],1,1,()=>{u[c]=null});return{c(){e=S("div"),a&&a.c(),n=A(),t=S("div"),s&&s.c(),i=A(),o=S("div");for(let c=0;c<u.length;c+=1)u[c].c();$(o,"class","grid-container svelte-ao1xvt"),H(o,"--grid-cols",l[25]),H(o,"--grid-rows",l[4]),H(o,"--object-fit",l[7]),F(o,"pt-6",l[2]),$(t,"class","grid-wrap svelte-ao1xvt"),F(t,"minimal",l[12]==="minimal"),F(t,"fixed-height",l[12]!=="minimal"&&(!l[5]||l[5]=="auto")),F(t,"hidden",l[23]),H(t,"height",l[5]!=="auto"?l[5]+"px":null),$(e,"class","gallery-container")},m(c,d){U(c,e,d),a&&a.m(e,null),N(e,n),N(e,t),s&&s.m(t,null),N(t,i),N(t,o);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(o,null);l[58](e),f=!0},p(c,d){if(c[30]&&c[6]?a?(a.p(c,d),d[0]&1073741888&&m(a,1)):(a=Ee(c),a.c(),m(a,1),a.m(e,n)):a&&(C(),g(a,1,1,()=>{a=null}),D()),c[11]&&c[1]===null?s?(s.p(c,d),d[0]&2050&&m(s,1)):(s=Re(c),s.c(),m(s,1),s.m(t,i)):s&&(C(),g(s,1,1,()=>{s=null}),D()),d[0]&2099266|d[1]&17){h=ie(c[21]);let b;for(b=0;b<h.length;b+=1){const z=je(c,h,b);u[b]?(u[b].p(z,d),m(u[b],1)):(u[b]=We(z),u[b].c(),m(u[b],1),u[b].m(o,null))}for(C(),b=h.length;b<u.length;b+=1)p(b);D()}(!f||d[0]&33554432)&&H(o,"--grid-cols",c[25]),(!f||d[0]&16)&&H(o,"--grid-rows",c[4]),(!f||d[0]&128)&&H(o,"--object-fit",c[7]),(!f||d[0]&4)&&F(o,"pt-6",c[2]),(!f||d[0]&4096)&&F(t,"minimal",c[12]==="minimal"),(!f||d[0]&4128)&&F(t,"fixed-height",c[12]!=="minimal"&&(!c[5]||c[5]=="auto")),(!f||d[0]&8388608)&&F(t,"hidden",c[23]),d[0]&32&&H(t,"height",c[5]!=="auto"?c[5]+"px":null)},i(c){if(!f){m(a),m(s);for(let d=0;d<h.length;d+=1)m(u[d]);f=!0}},o(c){g(a),g(s),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)g(u[d]);f=!1},d(c){c&&T(e),a&&a.d(),s&&s.d(),qe(u,c),l[58](null)}}}function Wt(l){let e,n;return e=new mt({props:{unpadded_box:!0,size:"large",$$slots:{default:[Jt]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ee(l){let e,n,t,i,o,f,a,s,h,u,p,c;n=new ht({props:{display_top_corner:l[14],$$slots:{default:[Ft]},$$scope:{ctx:l}}});const d=[St,Gt],b=[];function z(k,y){return"image"in k[30]?0:1}o=z(l),f=b[o]=d[o](l);let v=l[30]?.caption&&Ue(l),w=ie(l[21]),_=[];for(let k=0;k<w.length;k+=1)_[k]=Ne($e(l,w,k));const R=k=>g(_[k],1,1,()=>{_[k]=null});return{c(){e=S("button"),B(n.$$.fragment),t=A(),i=S("button"),f.c(),a=A(),v&&v.c(),s=A(),h=S("div");for(let k=0;k<_.length;k+=1)_[k].c();$(i,"class","media-button svelte-ao1xvt"),H(i,"height","calc(100% - "+(l[30].caption?"80px":"60px")+")"),$(i,"aria-label","detailed view of selected image"),$(h,"class","thumbnails scroll-hide svelte-ao1xvt"),$(h,"data-testid","container_el"),H(h,"justify-content",l[28]?"flex-start":"center"),$(e,"class","preview svelte-ao1xvt"),F(e,"minimal",l[12]==="minimal")},m(k,y){U(k,e,y),I(n,e,null),N(e,t),N(e,i),b[o].m(i,null),N(e,a),v&&v.m(e,null),N(e,s),N(e,h);for(let O=0;O<_.length;O+=1)_[O]&&_[O].m(h,null);l[51](h),u=!0,p||(c=[K(i,"click",function(){Lt("image"in l[30]?l[48]:null)&&("image"in l[30]?l[48]:null).apply(this,arguments)}),K(e,"keydown",l[33])],p=!0)},p(k,y){l=k;const O={};y[0]&16384&&(O.display_top_corner=l[14]),y[0]&1084270338|y[2]&64&&(O.$$scope={dirty:y,ctx:l}),n.$set(O);let V=o;if(o=z(l),o===V?b[o].p(l,y):(C(),g(b[V],1,1,()=>{b[V]=null}),D(),f=b[o],f?f.p(l,y):(f=b[o]=d[o](l),f.c()),m(f,1),f.m(i,null)),(!u||y[0]&1073741824)&&H(i,"height","calc(100% - "+(l[30].caption?"80px":"60px")+")"),l[30]?.caption?v?v.p(l,y):(v=Ue(l),v.c(),v.m(e,s)):v&&(v.d(1),v=null),y[0]&69210114){w=ie(l[21]);let L;for(L=0;L<w.length;L+=1){const Q=$e(l,w,L);_[L]?(_[L].p(Q,y),m(_[L],1)):(_[L]=Ne(Q),_[L].c(),m(_[L],1),_[L].m(h,null))}for(C(),L=w.length;L<_.length;L+=1)R(L);D()}(!u||y[0]&268435456)&&H(h,"justify-content",l[28]?"flex-start":"center"),(!u||y[0]&4096)&&F(e,"minimal",l[12]==="minimal")},i(k){if(!u){m(n.$$.fragment,k),m(f);for(let y=0;y<w.length;y+=1)m(_[y]);u=!0}},o(k){g(n.$$.fragment,k),g(f),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)g(_[y]);u=!1},d(k){k&&T(e),E(n),b[o].d(),v&&v.d(),qe(_,k),l[51](null),p=!1,Tt(c)}}}function Ie(l){let e,n;return e=new ue({props:{Icon:dt,label:l[10]("common.download")}}),e.$on("click",l[43]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.download")),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Le(l){let e,n;return e=new gt({props:{fullscreen:l[15]}}),e.$on("fullscreen",l[44]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&32768&&(o.fullscreen=t[15]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Me(l){let e,n,t;return n=new bt({props:{i18n:l[10],value:l[21],formatter:yt}}),n.$on("share",l[45]),n.$on("error",l[46]),{c(){e=S("div"),B(n.$$.fragment),$(e,"class","icon-button")},m(i,o){U(i,e,o),I(n,e,null),t=!0},p(i,o){const f={};o[0]&1024&&(f.i18n=i[10]),o[0]&2097152&&(f.value=i[21]),n.$set(f)},i(i){t||(m(n.$$.fragment,i),t=!0)},o(i){g(n.$$.fragment,i),t=!1},d(i){i&&T(e),E(n)}}}function Te(l){let e,n;return e=new ue({props:{Icon:Se,label:"Close"}}),e.$on("click",l[47]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p:Mt,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ft(l){let e,n,t,i,o,f=l[9]&&Ie(l),a=l[13]&&Le(l),s=l[8]&&Me(l),h=!l[23]&&Te(l);return{c(){f&&f.c(),e=A(),a&&a.c(),n=A(),s&&s.c(),t=A(),h&&h.c(),i=me()},m(u,p){f&&f.m(u,p),U(u,e,p),a&&a.m(u,p),U(u,n,p),s&&s.m(u,p),U(u,t,p),h&&h.m(u,p),U(u,i,p),o=!0},p(u,p){u[9]?f?(f.p(u,p),p[0]&512&&m(f,1)):(f=Ie(u),f.c(),m(f,1),f.m(e.parentNode,e)):f&&(C(),g(f,1,1,()=>{f=null}),D()),u[13]?a?(a.p(u,p),p[0]&8192&&m(a,1)):(a=Le(u),a.c(),m(a,1),a.m(n.parentNode,n)):a&&(C(),g(a,1,1,()=>{a=null}),D()),u[8]?s?(s.p(u,p),p[0]&256&&m(s,1)):(s=Me(u),s.c(),m(s,1),s.m(t.parentNode,t)):s&&(C(),g(s,1,1,()=>{s=null}),D()),u[23]?h&&(C(),g(h,1,1,()=>{h=null}),D()):h?(h.p(u,p),p[0]&8388608&&m(h,1)):(h=Te(u),h.c(),m(h,1),h.m(i.parentNode,i))},i(u){o||(m(f),m(a),m(s),m(h),o=!0)},o(u){g(f),g(a),g(s),g(h),o=!1},d(u){u&&(T(e),T(n),T(t),T(i)),f&&f.d(u),a&&a.d(u),s&&s.d(u),h&&h.d(u)}}}function Gt(l){let e,n;return e=new _e({props:{src:l[30].video.url,"data-testid":"detailed-video",alt:l[30].caption||"",loading:"lazy",loop:!1,is_stream:!1,muted:!1,controls:!0}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].video.url),i[0]&1073741824&&(o.alt=t[30].caption||""),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function St(l){let e,n;return e=new ce({props:{"data-testid":"detailed-image",src:l[30].image.url,alt:l[30].caption||"",title:l[30].caption||null,class:l[30].caption&&"with-caption",loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&1073741824&&(o.src=t[30].image.url),i[0]&1073741824&&(o.alt=t[30].caption||""),i[0]&1073741824&&(o.title=t[30].caption||null),i[0]&1073741824&&(o.class=t[30].caption&&"with-caption"),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ue(l){let e,n=l[30].caption+"",t;return{c(){e=S("caption"),t=Oe(n),$(e,"class","caption svelte-ao1xvt")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&1073741824&&n!==(n=i[30].caption+"")&&He(t,n)},d(i){i&&T(e)}}}function qt(l){let e,n,t,i;return e=new Ge({}),t=new _e({props:{src:l[66].video.url,title:l[66].caption||null,is_stream:!1,"data-testid":"thumbnail "+(l[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){B(e.$$.fragment),n=A(),B(t.$$.fragment)},m(o,f){I(e,o,f),U(o,n,f),I(t,o,f),i=!0},p(o,f){const a={};f[0]&2097152&&(a.src=o[66].video.url),f[0]&2097152&&(a.title=o[66].caption||null),t.$set(a)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(n),E(e,o),E(t,o)}}}function Ht(l){let e,n;return e=new ce({props:{src:l[66].image.url,title:l[66].caption||null,"data-testid":"thumbnail "+(l[65]+1),alt:"",loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&2097152&&(o.src=t[66].image.url),i[0]&2097152&&(o.title=t[66].caption||null),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ne(l){let e,n,t,i,o,f=l[65],a,s,h;const u=[Ht,qt],p=[];function c(v,w){return"image"in v[66]?0:1}n=c(l),t=p[n]=u[n](l);const d=()=>l[49](e,f),b=()=>l[49](null,f);function z(){return l[50](l[65])}return{c(){e=S("button"),t.c(),i=A(),$(e,"class","thumbnail-item thumbnail-small svelte-ao1xvt"),$(e,"aria-label",o="Thumbnail "+(l[65]+1)+" of "+l[21].length),F(e,"selected",l[1]===l[65]&&l[12]!=="minimal")},m(v,w){U(v,e,w),p[n].m(e,null),N(e,i),d(),a=!0,s||(h=K(e,"click",z),s=!0)},p(v,w){l=v;let _=n;n=c(l),n===_?p[n].p(l,w):(C(),g(p[_],1,1,()=>{p[_]=null}),D(),t=p[n],t?t.p(l,w):(t=p[n]=u[n](l),t.c()),m(t,1),t.m(e,i)),(!a||w[0]&2097152&&o!==(o="Thumbnail "+(l[65]+1)+" of "+l[21].length))&&$(e,"aria-label",o),f!==l[65]&&(b(),f=l[65],d()),(!a||w[0]&4098)&&F(e,"selected",l[1]===l[65]&&l[12]!=="minimal")},i(v){a||(m(t),a=!0)},o(v){g(t),a=!1},d(v){v&&T(e),p[n].d(),b(),s=!1,h()}}}function Re(l){let e,n;return e=new wt({props:{i18n:l[10],$$slots:{default:[Pt]},$$scope:{ctx:l}}}),e.$on("clear",l[55]),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&1024&&(o.i18n=t[10]),i[0]&538903552|i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function De(l){let e,n;return e=new ue({props:{Icon:pt,label:l[10]("common.upload"),$$slots:{default:[Ot]},$$scope:{ctx:l}}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&1024&&(o.label=t[10]("common.upload")),i[0]&538902528|i[2]&64&&(o.$$scope={dirty:i,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ot(l){let e,n,t;function i(f){l[52](f)}let o={icon_upload:!0,filetype:l[17],file_count:"multiple",max_file_size:l[18],root:l[16],stream_handler:l[20],upload:l[19]};return l[29]!==void 0&&(o.uploading=l[29]),e=new kt({props:o}),ne.push(()=>Bt(e,"uploading",i)),e.$on("load",l[53]),e.$on("error",l[54]),{c(){B(e.$$.fragment)},m(f,a){I(e,f,a),t=!0},p(f,a){const s={};a[0]&131072&&(s.filetype=f[17]),a[0]&262144&&(s.max_file_size=f[18]),a[0]&65536&&(s.root=f[16]),a[0]&1048576&&(s.stream_handler=f[20]),a[0]&524288&&(s.upload=f[19]),!n&&a[0]&536870912&&(n=!0,s.uploading=f[29],jt(()=>n=!1)),e.$set(s)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){E(e,f)}}}function Pt(l){let e,n,t=l[19]&&l[20]&&De(l);return{c(){t&&t.c(),e=me()},m(i,o){t&&t.m(i,o),U(i,e,o),n=!0},p(i,o){i[19]&&i[20]?t?(t.p(i,o),o[0]&1572864&&m(t,1)):(t=De(i),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(C(),g(t,1,1,()=>{t=null}),D())},i(i){n||(m(t),n=!0)},o(i){g(t),n=!1},d(i){i&&T(e),t&&t.d(i)}}}function Vt(l){let e,n,t,i;return e=new Ge({}),t=new _e({props:{src:l[63].video.url,title:l[63].caption||null,is_stream:!1,"data-testid":"thumbnail "+(l[65]+1),alt:"",loading:"lazy",loop:!1}}),{c(){B(e.$$.fragment),n=A(),B(t.$$.fragment)},m(o,f){I(e,o,f),U(o,n,f),I(t,o,f),i=!0},p(o,f){const a={};f[0]&2097152&&(a.src=o[63].video.url),f[0]&2097152&&(a.title=o[63].caption||null),t.$set(a)},i(o){i||(m(e.$$.fragment,o),m(t.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),i=!1},d(o){o&&T(n),E(e,o),E(t,o)}}}function Xt(l){let e,n;return e=new ce({props:{alt:l[63].caption||"",src:typeof l[63].image=="string"?l[63].image:l[63].image.url,loading:"lazy"}}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},p(t,i){const o={};i[0]&2097152&&(o.alt=t[63].caption||""),i[0]&2097152&&(o.src=typeof t[63].image=="string"?t[63].image:t[63].image.url),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Ce(l){let e,n=l[63].caption+"",t;return{c(){e=S("div"),t=Oe(n),$(e,"class","caption-label svelte-ao1xvt")},m(i,o){U(i,e,o),N(e,t)},p(i,o){o[0]&2097152&&n!==(n=i[63].caption+"")&&He(t,n)},d(i){i&&T(e)}}}function Ae(l){let e,n,t,i,o;n=new Se({});function f(){return l[57](l[65])}return{c(){e=S("button"),B(n.$$.fragment),$(e,"class","delete-button svelte-ao1xvt"),$(e,"aria-label","Delete image")},m(a,s){U(a,e,s),I(n,e,null),t=!0,i||(o=K(e,"click",Nt(f)),i=!0)},p(a,s){l=a},i(a){t||(m(n.$$.fragment,a),t=!0)},o(a){g(n.$$.fragment,a),t=!1},d(a){a&&T(e),E(n),i=!1,o()}}}function We(l){let e,n,t,i,o,f,a,s,h,u,p;const c=[Xt,Vt],d=[];function b(_,R){return"image"in _[63]?0:1}t=b(l),i=d[t]=c[t](l);let z=l[63].caption&&Ce(l);function v(){return l[56](l[65])}let w=l[11]&&Ae(l);return{c(){e=S("div"),n=S("button"),i.c(),o=A(),z&&z.c(),a=A(),w&&w.c(),s=A(),$(n,"class","thumbnail-item thumbnail-lg svelte-ao1xvt"),$(n,"aria-label",f="Thumbnail "+(l[65]+1)+" of "+l[21].length),F(n,"selected",l[1]===l[65]),$(e,"class","gallery-item svelte-ao1xvt")},m(_,R){U(_,e,R),N(e,n),d[t].m(n,null),N(n,o),z&&z.m(n,null),N(e,a),w&&w.m(e,null),N(e,s),h=!0,u||(p=K(n,"click",v),u=!0)},p(_,R){l=_;let k=t;t=b(l),t===k?d[t].p(l,R):(C(),g(d[k],1,1,()=>{d[k]=null}),D(),i=d[t],i?i.p(l,R):(i=d[t]=c[t](l),i.c()),m(i,1),i.m(n,o)),l[63].caption?z?z.p(l,R):(z=Ce(l),z.c(),z.m(n,null)):z&&(z.d(1),z=null),(!h||R[0]&2097152&&f!==(f="Thumbnail "+(l[65]+1)+" of "+l[21].length))&&$(n,"aria-label",f),(!h||R[0]&2)&&F(n,"selected",l[1]===l[65]),l[11]?w?(w.p(l,R),R[0]&2048&&m(w,1)):(w=Ae(l),w.c(),m(w,1),w.m(e,s)):w&&(C(),g(w,1,1,()=>{w=null}),D())},i(_){h||(m(i),m(w),h=!0)},o(_){g(i),g(w),h=!1},d(_){_&&T(e),d[t].d(),z&&z.d(),w&&w.d(),u=!1,p()}}}function Jt(l){let e,n;return e=new Fe({}),{c(){B(e.$$.fragment)},m(t,i){I(e,t,i),n=!0},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Kt(l){let e,n,t,i,o,f,a;$t(l[42]);let s=l[2]&&Be(l);const h=[Wt,At],u=[];function p(c,d){return c[0]==null||c[21]==null||c[21].length===0?0:1}return n=p(l),t=u[n]=h[n](l),{c(){s&&s.c(),e=A(),t.c(),i=me()},m(c,d){s&&s.m(c,d),U(c,e,d),u[n].m(c,d),U(c,i,d),o=!0,f||(a=K(Pe,"resize",l[42]),f=!0)},p(c,d){c[2]?s?(s.p(c,d),d[0]&4&&m(s,1)):(s=Be(c),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(C(),g(s,1,1,()=>{s=null}),D());let b=n;n=p(c),n===b?u[n].p(c,d):(C(),g(u[b],1,1,()=>{u[b]=null}),D(),t=u[n],t?t.p(c,d):(t=u[n]=h[n](c),t.c()),m(t,1),t.m(i.parentNode,i))},i(c){o||(m(s),m(t),o=!0)},o(c){g(s),g(t),o=!1},d(c){c&&(T(e),T(i)),s&&s.d(c),u[n].d(c),f=!1,a()}}}function Qt(l,e,n){let t,i,o,{show_label:f=!0}=e,{label:a}=e,{value:s=null}=e,{columns:h=[2]}=e,{rows:u=void 0}=e,{height:p="auto"}=e,{preview:c}=e,{allow_preview:d=!0}=e,{object_fit:b="cover"}=e,{show_share_button:z=!1}=e,{show_download_button:v=!1}=e,{i18n:w}=e,{selected_index:_=null}=e,{interactive:R}=e,{_fetch:k}=e,{mode:y="normal"}=e,{show_fullscreen_button:O=!0}=e,{display_icon_button_wrapper_top_corner:V=!1}=e,{fullscreen:L=!1}=e,{root:Q=""}=e,{file_types:he=["image","video"]}=e,{max_file_size:de=null}=e,{upload:ge=void 0}=e,{stream_handler:be=void 0}=e,pe=!1,oe;const P=Rt();let Y=!0,W=null,ee=h,re=s;_==null&&c&&s?.length&&(_=0);let fe=_;function we(r){const M=r.target,G=r.offsetX,J=M.offsetWidth/2;G<J?n(1,_=t):n(1,_=i)}function Ve(r){switch(r.code){case"Escape":r.preventDefault(),n(1,_=null);break;case"ArrowLeft":r.preventDefault(),n(1,_=t);break;case"ArrowRight":r.preventDefault(),n(1,_=i);break}}let X=[],q;async function Xe(r){if(typeof r!="number"||(await Ct(),X[r]===void 0))return;X[r]?.focus();const{left:M,width:G}=q.getBoundingClientRect(),{left:te,width:J}=X[r].getBoundingClientRect(),x=te-M+J/2-G/2+q.scrollLeft;q&&typeof q.scrollTo=="function"&&q.scrollTo({left:x<0?0:x,behavior:"smooth"})}let ke=0;async function ve(r,M){let G;try{G=await k(r)}catch(x){if(x instanceof TypeError){window.open(r,"_blank","noreferrer");return}throw x}const te=await G.blob(),J=URL.createObjectURL(te),le=document.createElement("a");le.href=J,le.download=M,le.click(),URL.revokeObjectURL(J)}let ye=!1;function Z(){q&&n(28,ye=q.scrollWidth>q.clientWidth)}Dt(()=>(Z(),document.addEventListener("fullscreenchange",()=>{n(23,pe=!!document.fullscreenElement)}),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)));function ze(r){if(!s||!W)return;const M=W[r];let G;"image"in M?G={file:M.image,index:r}:"video"in M&&(G={file:M.video,index:r}),G&&P("delete",G)}let se=!1;function Je(){n(27,ke=Pe.innerHeight)}const Ke=()=>{const r="image"in o?o?.image:o?.video;if(r==null)return;const{url:M,orig_name:G}=r;M&&ve(M,G??"image")};function Qe(r){ae.call(this,l,r)}function Ye(r){ae.call(this,l,r)}function Ze(r){ae.call(this,l,r)}const xe=()=>{n(1,_=null),P("preview_close")},et=r=>we(r);function tt(r,M){ne[r?"unshift":"push"](()=>{X[M]=r,n(26,X)})}const lt=r=>n(1,_=r);function nt(r){ne[r?"unshift":"push"](()=>{q=r,n(22,q)})}function it(r){se=r,n(29,se)}const ot=r=>P("upload",r.detail),rt=r=>P("error",r.detail),ft=()=>n(0,s=[]),st=r=>{_===null&&d&&P("preview_open"),n(1,_=r)},at=r=>ze(r);function ut(r){ne[r?"unshift":"push"](()=>{oe=r,n(24,oe)})}return l.$$set=r=>{"show_label"in r&&n(2,f=r.show_label),"label"in r&&n(3,a=r.label),"value"in r&&n(0,s=r.value),"columns"in r&&n(36,h=r.columns),"rows"in r&&n(4,u=r.rows),"height"in r&&n(5,p=r.height),"preview"in r&&n(37,c=r.preview),"allow_preview"in r&&n(6,d=r.allow_preview),"object_fit"in r&&n(7,b=r.object_fit),"show_share_button"in r&&n(8,z=r.show_share_button),"show_download_button"in r&&n(9,v=r.show_download_button),"i18n"in r&&n(10,w=r.i18n),"selected_index"in r&&n(1,_=r.selected_index),"interactive"in r&&n(11,R=r.interactive),"_fetch"in r&&n(38,k=r._fetch),"mode"in r&&n(12,y=r.mode),"show_fullscreen_button"in r&&n(13,O=r.show_fullscreen_button),"display_icon_button_wrapper_top_corner"in r&&n(14,V=r.display_icon_button_wrapper_top_corner),"fullscreen"in r&&n(15,L=r.fullscreen),"root"in r&&n(16,Q=r.root),"file_types"in r&&n(17,he=r.file_types),"max_file_size"in r&&n(18,de=r.max_file_size),"upload"in r&&n(19,ge=r.upload),"stream_handler"in r&&n(20,be=r.stream_handler)},l.$$.update=()=>{if(l.$$.dirty[0]&1|l.$$.dirty[1]&256&&n(39,Y=s==null||s.length===0?!0:Y),l.$$.dirty[0]&1&&n(21,W=s==null?null:s.map(r=>"video"in r?{video:r.video,caption:r.caption}:"image"in r?{image:r.image,caption:r.caption}:{})),l.$$.dirty[0]&2097152|l.$$.dirty[1]&32)if(W&&h){const r=W.length;Array.isArray(h)?n(25,ee=h.map(M=>Math.min(M,r))):n(25,ee=Math.min(h,r))}else n(25,ee=h);l.$$.dirty[0]&3|l.$$.dirty[1]&832&&(vt(re,s)||(Y?(n(1,_=c&&s?.length?0:null),n(39,Y=!1)):_!==null&&s!==null?n(1,_=Math.max(0,Math.min(_,s.length-1))):n(1,_=null),P("change"),n(40,re=s))),l.$$.dirty[0]&2097154|l.$$.dirty[1]&1024&&_!==fe&&(n(41,fe=_),_!==null&&(W!=null&&n(1,_=Math.max(0,Math.min(_,W.length-1))),P("select",{index:_,value:W?.[_]}))),l.$$.dirty[0]&2097154&&(t=((_??0)+(W?.length??0)-1)%(W?.length??0)),l.$$.dirty[0]&2097154&&(i=((_??0)+1)%(W?.length??0)),l.$$.dirty[0]&66&&d&&Xe(_),l.$$.dirty[0]&2097154&&n(30,o=_!=null&&W!=null?W[_]:null),l.$$.dirty[0]&2097152&&Z(),l.$$.dirty[0]&4194304&&q&&Z()},[s,_,f,a,u,p,d,b,z,v,w,R,y,O,V,L,Q,he,de,ge,be,W,q,pe,oe,ee,X,ke,ye,se,o,P,we,Ve,ve,ze,h,c,k,Y,re,fe,Je,Ke,Qe,Ye,Ze,xe,et,tt,lt,nt,it,ot,rt,ft,st,at,ut]}class al extends zt{constructor(e){super(),It(this,e,Qt,Kt,Ut,{show_label:2,label:3,value:0,columns:36,rows:4,height:5,preview:37,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9,i18n:10,selected_index:1,interactive:11,_fetch:38,mode:12,show_fullscreen_button:13,display_icon_button_wrapper_top_corner:14,fullscreen:15,root:16,file_types:17,max_file_size:18,upload:19,stream_handler:20},null,[-1,-1,-1])}get show_label(){return this.$$.ctx[2]}set show_label(e){this.$$set({show_label:e}),j()}get label(){return this.$$.ctx[3]}set label(e){this.$$set({label:e}),j()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),j()}get columns(){return this.$$.ctx[36]}set columns(e){this.$$set({columns:e}),j()}get rows(){return this.$$.ctx[4]}set rows(e){this.$$set({rows:e}),j()}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),j()}get preview(){return this.$$.ctx[37]}set preview(e){this.$$set({preview:e}),j()}get allow_preview(){return this.$$.ctx[6]}set allow_preview(e){this.$$set({allow_preview:e}),j()}get object_fit(){return this.$$.ctx[7]}set object_fit(e){this.$$set({object_fit:e}),j()}get show_share_button(){return this.$$.ctx[8]}set show_share_button(e){this.$$set({show_share_button:e}),j()}get show_download_button(){return this.$$.ctx[9]}set show_download_button(e){this.$$set({show_download_button:e}),j()}get i18n(){return this.$$.ctx[10]}set i18n(e){this.$$set({i18n:e}),j()}get selected_index(){return this.$$.ctx[1]}set selected_index(e){this.$$set({selected_index:e}),j()}get interactive(){return this.$$.ctx[11]}set interactive(e){this.$$set({interactive:e}),j()}get _fetch(){return this.$$.ctx[38]}set _fetch(e){this.$$set({_fetch:e}),j()}get mode(){return this.$$.ctx[12]}set mode(e){this.$$set({mode:e}),j()}get show_fullscreen_button(){return this.$$.ctx[13]}set show_fullscreen_button(e){this.$$set({show_fullscreen_button:e}),j()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[14]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),j()}get fullscreen(){return this.$$.ctx[15]}set fullscreen(e){this.$$set({fullscreen:e}),j()}get root(){return this.$$.ctx[16]}set root(e){this.$$set({root:e}),j()}get file_types(){return this.$$.ctx[17]}set file_types(e){this.$$set({file_types:e}),j()}get max_file_size(){return this.$$.ctx[18]}set max_file_size(e){this.$$set({max_file_size:e}),j()}get upload(){return this.$$.ctx[19]}set upload(e){this.$$set({upload:e}),j()}get stream_handler(){return this.$$.ctx[20]}set stream_handler(e){this.$$set({stream_handler:e}),j()}}export{al as default};
//# sourceMappingURL=Gallery-BL67n78w.js.map
