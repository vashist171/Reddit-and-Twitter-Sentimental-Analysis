const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./module-yLDG8S0D.js","./module-C-VadMaF.js","./init-BXnIR-ED.js","./index-BvFm9VBJ.js","./index-BVoOcrq_.css","./init-DQCSNdur.css","./module-moYYmAFH.js"])))=>i.map(i=>d[i]);
import{M as St,U as cn}from"./ModifyUpload-DeA0LoIt.js";import{_ as et,p as _n}from"./index-BvFm9VBJ.js";import{H as dn,z as ue,O as fn,B as mn,M as gn,s as hn}from"./FullscreenButton-D7OpqaEU.js";import{a as bn}from"./StreamingBar-Bc_J-1Oe.js";import{p as tt,W as pn,s as nt,a as Ve,A as wn}from"./AudioPlayer-BYiM-y_F.js";import"./init-BXnIR-ED.js";function Fe(n,e,t,i){return new(t||(t=Promise))(function(o,a){function r(u){try{s(i.next(u))}catch(l){a(l)}}function c(u){try{s(i.throw(u))}catch(l){a(l)}}function s(u){var l;u.done?o(u.value):(l=u.value,l instanceof t?l:new t(function(d){d(l)})).then(r,c)}s((i=i.apply(n,[])).next())})}class vn{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i?.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class kn extends vn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const yn=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Le extends kn{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new Le(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const a=o.frequencyBinCount,r=new Float32Array(a),c=a/t.sampleRate;let s;const u=()=>{o.getFloatTimeDomainData(r),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[r],c)),s=requestAnimationFrame(u)};return u(),()=>{cancelAnimationFrame(s),i?.disconnect(),t?.close()}}startMic(e){return Fe(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return Fe(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||yn.find(a=>MediaRecorder.isTypeSupported(a)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=a=>{a.data.size>0&&o.push(a.data)},i.onstop=()=>{var a;const r=new Blob(o,{type:i.mimeType});this.emit("record-end",r),this.options.renderRecordedAudio!==!1&&((a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(r)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Fe(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:Dn,append:Lt,attr:it,destroy_each:Rn,detach:We,element:Ge,empty:En,ensure_array_like:ot,flush:rt,init:An,insert:He,noop:st,safe_not_equal:Mn,set_data:Ct,set_input_value:Ye,text:Pt}=window.__gradio__svelte__internal,{createEventDispatcher:Sn}=window.__gradio__svelte__internal;function lt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Ln(n){let e,t=ot(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=at(lt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=En()},m(o,a){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,a);He(o,e,a)},p(o,a){if(a&1){t=ot(o[0]);let r;for(r=0;r<t.length;r+=1){const c=lt(o,t,r);i[r]?i[r].p(c,a):(i[r]=at(c),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&We(e),Rn(i,o)}}}function Cn(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=Ge("option"),i=Pt(t),e.__value="",Ye(e,e.__value)},m(o,a){He(o,e,a),Lt(e,i)},p(o,a){a&2&&t!==(t=o[1]("audio.no_microphone")+"")&&Ct(i,t)},d(o){o&&We(e)}}}function at(n){let e,t=n[3].label+"",i,o;return{c(){e=Ge("option"),i=Pt(t),e.__value=o=n[3].deviceId,Ye(e,e.__value)},m(a,r){He(a,e,r),Lt(e,i)},p(a,r){r&1&&t!==(t=a[3].label+"")&&Ct(i,t),r&1&&o!==(o=a[3].deviceId)&&(e.__value=o,Ye(e,e.__value))},d(a){a&&We(e)}}}function Pn(n){let e,t;function i(r,c){return r[0].length===0?Cn:Ln}let o=i(n),a=o(n);return{c(){e=Ge("select"),a.c(),it(e,"class","mic-select svelte-1ya9x7a"),it(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(r,c){He(r,e,c),a.m(e,null)},p(r,[c]){o===(o=i(r))&&a?a.p(r,c):(a.d(1),a=o(r),a&&(a.c(),a.m(e,null))),c&1&&t!==(t=r[0].length===0)&&(e.disabled=t)},i:st,o:st,d(r){r&&We(e),a.d()}}}function zn(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const a=Sn();return n.$$set=r=>{"i18n"in r&&t(1,i=r.i18n),"micDevices"in r&&t(0,o=r.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2&&typeof window<"u")try{let r=[];Le.getAvailableAudioDevices().then(c=>{t(0,o=c),c.forEach(s=>{s.deviceId&&r.push(s)}),t(0,o=r)})}catch(r){throw r instanceof DOMException&&r.name=="NotAllowedError"&&a("error",i("audio.allow_recording_access")),r}},[o,i]}class zt extends Dn{constructor(e){super(),An(this,e,zn,Pn,Mn,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),rt()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),rt()}}const{SvelteComponent:Bn,add_flush_callback:In,append:z,attr:V,bind:Tn,binding_callbacks:ge,create_component:ut,destroy_component:ct,detach:Bt,element:se,flush:fe,init:Un,insert:It,listen:ke,mount_component:_t,run_all:jn,safe_not_equal:qn,set_data:ye,space:me,text:De,transition_in:dt,transition_out:ft}=window.__gradio__svelte__internal;function mt(n){let e,t;return{c(){e=se("time"),t=De(n[2]),V(e,"class","duration-button duration svelte-1oiuk2f")},m(i,o){It(i,e,o),z(e,t)},p(i,o){o&4&&ye(t,i[2])},d(i){i&&Bt(e)}}}function On(n){let e,t,i,o=n[1]("audio.record")+"",a,r,c,s=n[1]("audio.stop")+"",u,l,d,f,b=n[1]("audio.stop")+"",k,D,h,y,g,p,M=n[1]("audio.resume")+"",v,B,I,P,F,A,w,q;y=new dn({});let C=n[4]&&!n[3]&&mt(n);function ie(R){n[23](R)}let Y={i18n:n[1]};return n[5]!==void 0&&(Y.micDevices=n[5]),P=new zt({props:Y}),ge.push(()=>Tn(P,"micDevices",ie)),{c(){e=se("div"),t=se("div"),i=se("button"),a=De(o),r=me(),c=se("button"),u=De(s),d=me(),f=se("button"),k=De(b),D=me(),h=se("button"),ut(y.$$.fragment),g=me(),p=se("button"),v=De(M),B=me(),C&&C.c(),I=me(),ut(P.$$.fragment),V(i,"class","record record-button svelte-1oiuk2f"),V(c,"class",l="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-1oiuk2f"),V(f,"id","stop-paused"),V(f,"class","stop-button-paused svelte-1oiuk2f"),V(h,"aria-label","pause"),V(h,"class","pause-button svelte-1oiuk2f"),V(p,"class","resume-button svelte-1oiuk2f"),V(t,"class","wrapper svelte-1oiuk2f"),V(e,"class","controls svelte-1oiuk2f")},m(R,O){It(R,e,O),z(e,t),z(t,i),z(i,a),n[13](i),z(t,r),z(t,c),z(c,u),n[15](c),z(t,d),z(t,f),z(f,k),n[17](f),z(t,D),z(t,h),_t(y,h,null),n[19](h),z(t,g),z(t,p),z(p,v),n[21](p),z(t,B),C&&C.m(t,null),z(e,I),_t(P,e,null),A=!0,w||(q=[ke(i,"click",n[14]),ke(c,"click",n[16]),ke(f,"click",n[18]),ke(h,"click",n[20]),ke(p,"click",n[22])],w=!0)},p(R,[O]){(!A||O&2)&&o!==(o=R[1]("audio.record")+"")&&ye(a,o),(!A||O&2)&&s!==(s=R[1]("audio.stop")+"")&&ye(u,s),(!A||O&1&&l!==(l="stop-button "+(R[0].isPaused()?"stop-button-paused":"")+" svelte-1oiuk2f"))&&V(c,"class",l),(!A||O&2)&&b!==(b=R[1]("audio.stop")+"")&&ye(k,b),(!A||O&2)&&M!==(M=R[1]("audio.resume")+"")&&ye(v,M),R[4]&&!R[3]?C?C.p(R,O):(C=mt(R),C.c(),C.m(t,null)):C&&(C.d(1),C=null);const S={};O&2&&(S.i18n=R[1]),!F&&O&32&&(F=!0,S.micDevices=R[5],In(()=>F=!1)),P.$set(S)},i(R){A||(dt(y.$$.fragment,R),dt(P.$$.fragment,R),A=!0)},o(R){ft(y.$$.fragment,R),ft(P.$$.fragment,R),A=!1},d(R){R&&Bt(e),n[13](null),n[15](null),n[17](null),ct(y),n[19](null),n[21](null),C&&C.d(),ct(P),w=!1,jn(q)}}}function Wn(n,e,t){let{record:i}=e,{i18n:o}=e,{recording:a=!1}=e,r=[],c,s,u,l,d,f=!1,{record_time:b}=e,{show_recording_waveform:k}=e,{timing:D=!1}=e;function h(w){ge[w?"unshift":"push"](()=>{c=w,t(6,c),t(0,i)})}const y=()=>i.startRecording();function g(w){ge[w?"unshift":"push"](()=>{l=w,t(9,l),t(0,i)})}const p=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function M(w){ge[w?"unshift":"push"](()=>{d=w,t(10,d),t(0,i)})}const v=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function B(w){ge[w?"unshift":"push"](()=>{s=w,t(7,s),t(0,i)})}const I=()=>i.pauseRecording();function P(w){ge[w?"unshift":"push"](()=>{u=w,t(8,u),t(0,i)})}const F=()=>i.resumeRecording();function A(w){r=w,t(5,r)}return n.$$set=w=>{"record"in w&&t(0,i=w.record),"i18n"in w&&t(1,o=w.i18n),"recording"in w&&t(11,a=w.recording),"record_time"in w&&t(2,b=w.record_time),"show_recording_waveform"in w&&t(3,k=w.show_recording_waveform),"timing"in w&&t(4,D=w.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,c.style.display="none",c),t(9,l.style.display="flex",l),t(7,s.style.display="block",s)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,c.style.display="flex",c),t(9,l.style.display="none",l),t(7,s.style.display="none",s),t(6,c.disabled=!1,c)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,s.style.display="none",s),t(8,u.style.display="block",u),t(9,l.style.display="none",l),t(10,d.style.display="flex",d)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,s.style.display="block",s),t(8,u.style.display="none",u),t(6,c.style.display="none",c),t(9,l.style.display="flex",l),t(10,d.style.display="none",d)}),n.$$.dirty&6145&&(a&&!f?(i.startRecording(),t(12,f=!0)):(i.stopRecording(),t(12,f=!1)))},[i,o,b,k,D,r,c,s,u,l,d,a,f,h,y,g,p,M,v,B,I,P,F,A]}class Hn extends Bn{constructor(e){super(),Un(this,e,Wn,On,qn,{record:0,i18n:1,recording:11,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),fe()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),fe()}get recording(){return this.$$.ctx[11]}set recording(e){this.$$set({recording:e}),fe()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),fe()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),fe()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),fe()}}const{SvelteComponent:Nn,add_flush_callback:Te,append:H,attr:X,bind:Ue,binding_callbacks:ae,check_outros:gt,create_component:Tt,destroy_component:Ut,detach:Ce,element:Z,flush:oe,group_outros:ht,init:Fn,insert:Pe,mount_component:jt,noop:Vn,safe_not_equal:Yn,set_data:qt,space:he,text:Ot,transition_in:le,transition_out:be}=window.__gradio__svelte__internal,{onMount:Gn}=window.__gradio__svelte__internal,{createEventDispatcher:Jn}=window.__gradio__svelte__internal;function bt(n){let e,t,i,o,a,r=n[0]==="edit"&&n[17]>0&&pt(n);function c(l,d){return l[16]?Qn:Kn}let s=c(n),u=s(n);return{c(){e=Z("div"),t=Z("time"),t.textContent="0:00",i=he(),o=Z("div"),r&&r.c(),a=he(),u.c(),X(t,"class","time svelte-9n45fh"),X(e,"class","timestamps svelte-9n45fh")},m(l,d){Pe(l,e,d),H(e,t),n[23](t),H(e,i),H(e,o),r&&r.m(o,null),H(o,a),u.m(o,null)},p(l,d){l[0]==="edit"&&l[17]>0?r?r.p(l,d):(r=pt(l),r.c(),r.m(o,a)):r&&(r.d(1),r=null),s===(s=c(l))&&u?u.p(l,d):(u.d(1),u=s(l),u&&(u.c(),u.m(o,null)))},d(l){l&&Ce(e),n[23](null),r&&r.d(),u.d()}}}function pt(n){let e,t=ue(n[17])+"",i;return{c(){e=Z("time"),i=Ot(t),X(e,"class","trim-duration svelte-9n45fh")},m(o,a){Pe(o,e,a),H(e,i)},p(o,a){a[0]&131072&&t!==(t=ue(o[17])+"")&&qt(i,t)},d(o){o&&Ce(e)}}}function Kn(n){let e;return{c(){e=Z("time"),e.textContent="0:00",X(e,"class","duration svelte-9n45fh")},m(t,i){Pe(t,e,i),n[24](e)},p:Vn,d(t){t&&Ce(e),n[24](null)}}}function Qn(n){let e,t=ue(n[15])+"",i;return{c(){e=Z("time"),i=Ot(t),X(e,"class","duration svelte-9n45fh")},m(o,a){Pe(o,e,a),H(e,i)},p(o,a){a[0]&32768&&t!==(t=ue(o[15])+"")&&qt(i,t)},d(o){o&&Ce(e)}}}function wt(n){let e,t,i;function o(r){n[25](r)}let a={i18n:n[1],timing:n[16],recording:n[5],show_recording_waveform:n[2].show_recording_waveform,record_time:ue(n[15])};return n[7]!==void 0&&(a.record=n[7]),e=new Hn({props:a}),ae.push(()=>Ue(e,"record",o)),{c(){Tt(e.$$.fragment)},m(r,c){jt(e,r,c),i=!0},p(r,c){const s={};c[0]&2&&(s.i18n=r[1]),c[0]&65536&&(s.timing=r[16]),c[0]&32&&(s.recording=r[5]),c[0]&4&&(s.show_recording_waveform=r[2].show_recording_waveform),c[0]&32768&&(s.record_time=ue(r[15])),!t&&c[0]&128&&(t=!0,s.record=r[7],Te(()=>t=!1)),e.$set(s)},i(r){i||(le(e.$$.fragment,r),i=!0)},o(r){be(e.$$.fragment,r),i=!1},d(r){Ut(e,r)}}}function vt(n){let e,t,i,o,a;function r(l){n[26](l)}function c(l){n[27](l)}function s(l){n[28](l)}let u={container:n[11],playing:n[10],audio_duration:n[14],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[18],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[6]!==void 0&&(u.waveform=n[6]),n[17]!==void 0&&(u.trimDuration=n[17]),n[0]!==void 0&&(u.mode=n[0]),e=new pn({props:u}),ae.push(()=>Ue(e,"waveform",r)),ae.push(()=>Ue(e,"trimDuration",c)),ae.push(()=>Ue(e,"mode",s)),{c(){Tt(e.$$.fragment)},m(l,d){jt(e,l,d),a=!0},p(l,d){const f={};d[0]&2048&&(f.container=l[11]),d[0]&1024&&(f.playing=l[10]),d[0]&16384&&(f.audio_duration=l[14]),d[0]&2&&(f.i18n=l[1]),d[0]&16&&(f.editable=l[4]),d[0]&8&&(f.handle_reset_value=l[3]),d[0]&4&&(f.waveform_options=l[2]),!t&&d[0]&64&&(t=!0,f.waveform=l[6],Te(()=>t=!1)),!i&&d[0]&131072&&(i=!0,f.trimDuration=l[17],Te(()=>i=!1)),!o&&d[0]&1&&(o=!0,f.mode=l[0],Te(()=>o=!1)),e.$set(f)},i(l){a||(le(e.$$.fragment,l),a=!0)},o(l){be(e.$$.fragment,l),a=!1},d(l){Ut(e,l)}}}function Xn(n){let e,t,i,o,a,r,c,s,u=(n[16]||n[13])&&n[2].show_recording_waveform&&bt(n),l=n[12]&&!n[13]&&wt(n),d=n[6]&&n[13]&&vt(n);return{c(){e=Z("div"),t=Z("div"),i=he(),o=Z("div"),a=he(),u&&u.c(),r=he(),l&&l.c(),c=he(),d&&d.c(),X(t,"class","microphone svelte-9n45fh"),X(t,"data-testid","microphone-waveform"),X(o,"data-testid","recording-waveform"),X(e,"class","component-wrapper svelte-9n45fh")},m(f,b){Pe(f,e,b),H(e,t),n[21](t),H(e,i),H(e,o),n[22](o),H(e,a),u&&u.m(e,null),H(e,r),l&&l.m(e,null),H(e,c),d&&d.m(e,null),s=!0},p(f,b){(f[16]||f[13])&&f[2].show_recording_waveform?u?u.p(f,b):(u=bt(f),u.c(),u.m(e,r)):u&&(u.d(1),u=null),f[12]&&!f[13]?l?(l.p(f,b),b[0]&12288&&le(l,1)):(l=wt(f),l.c(),le(l,1),l.m(e,c)):l&&(ht(),be(l,1,1,()=>{l=null}),gt()),f[6]&&f[13]?d?(d.p(f,b),b[0]&8256&&le(d,1)):(d=vt(f),d.c(),le(d,1),d.m(e,null)):d&&(ht(),be(d,1,1,()=>{d=null}),gt())},i(f){s||(le(l),le(d),s=!0)},o(f){be(l),be(d),s=!1},d(f){f&&Ce(e),n[21](null),n[22](null),u&&u.d(),l&&l.d(),d&&d.d()}}}function Zn(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:a}=e,{waveform_settings:r}=e,{waveform_options:c={show_recording_waveform:!0}}=e,{handle_reset_value:s}=e,{editable:u=!0}=e,{recording:l=!1}=e,d,f,b=!1,k,D,h,y=null,g,p,M,v=0,B,I=!1,P=0;const F=()=>{clearInterval(B),B=setInterval(()=>{t(15,v++,v)},1e3)},A=Jn();function w(){if(F(),t(16,I=!0),A("start_recording"),c.show_recording_waveform){let m=D;m&&(m.style.display="block")}}async function q(m){t(15,v=0),t(16,I=!1),clearInterval(B);try{const j=await m.arrayBuffer(),L=await new AudioContext({sampleRate:r.sampleRate}).decodeAudioData(j);L&&await tt(L).then(async Q=>{await a([Q],"change"),await a([Q],"stop_recording")})}catch(j){console.error(j)}}const C=()=>{D&&t(12,D.innerHTML="",D),d!==void 0&&d.destroy(),D&&(d=Ve.create({...r,normalize:!1,container:D}),t(7,h=d.registerPlugin(Le.create())),h?.on("record-end",q),h?.on("record-start",w),h?.on("record-pause",()=>{A("pause_recording"),clearInterval(B)}),h?.on("record-end",m=>{t(13,y=URL.createObjectURL(m));const j=D,ce=k;j&&(j.style.display="none"),ce&&y&&(ce.innerHTML="",ie())}))},ie=()=>{let m=k;!y||!m||t(6,f=Ve.create({container:m,url:y,...r}))},Y=async(m,j)=>{t(0,i="edit");const ce=f.getDecodedData();ce&&await tt(ce,m,j).then(async L=>{await a([L],"change"),await a([L],"stop_recording"),f.destroy(),ie()}),A("edit")};Gn(()=>{C(),window.addEventListener("keydown",m=>{k&&k.contains(document.activeElement)&&(m.key==="ArrowRight"?nt(f,.1):m.key==="ArrowLeft"&&nt(f,-.1))})});function R(m){ae[m?"unshift":"push"](()=>{D=m,t(12,D)})}function O(m){ae[m?"unshift":"push"](()=>{k=m,t(11,k)})}function S(m){ae[m?"unshift":"push"](()=>{g=m,t(8,g),t(6,f)})}function G(m){ae[m?"unshift":"push"](()=>{p=m,t(9,p),t(6,f)})}function J(m){h=m,t(7,h)}function K(m){f=m,t(6,f)}function de(m){P=m,t(17,P)}function Ie(m){i=m,t(0,i)}return n.$$set=m=>{"mode"in m&&t(0,i=m.mode),"i18n"in m&&t(1,o=m.i18n),"dispatch_blob"in m&&t(19,a=m.dispatch_blob),"waveform_settings"in m&&t(20,r=m.waveform_settings),"waveform_options"in m&&t(2,c=m.waveform_options),"handle_reset_value"in m&&t(3,s=m.handle_reset_value),"editable"in m&&t(4,u=m.editable),"recording"in m&&t(5,l=m.recording)},n.$$.update=()=>{n.$$.dirty[0]&128&&h?.on("record-resume",()=>{F()}),n.$$.dirty[0]&576&&f?.on("decode",m=>{t(14,M=m),p&&t(9,p.textContent=ue(m),p)}),n.$$.dirty[0]&320&&f?.on("timeupdate",m=>g&&t(8,g.textContent=ue(m),g)),n.$$.dirty[0]&64&&f?.on("pause",()=>{A("pause"),t(10,b=!1)}),n.$$.dirty[0]&64&&f?.on("play",()=>{A("play"),t(10,b=!0)}),n.$$.dirty[0]&64&&f?.on("finish",()=>{A("stop"),t(10,b=!1)})},[i,o,c,s,u,l,f,h,g,p,b,k,D,y,M,v,I,P,Y,a,r,R,O,S,G,J,K,de,Ie]}class $n extends Nn{constructor(e){super(),Fn(this,e,Zn,Xn,Yn,{mode:0,i18n:1,dispatch_blob:19,waveform_settings:20,waveform_options:2,handle_reset_value:3,editable:4,recording:5},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),oe()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),oe()}get dispatch_blob(){return this.$$.ctx[19]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),oe()}get waveform_settings(){return this.$$.ctx[20]}set waveform_settings(e){this.$$set({waveform_settings:e}),oe()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),oe()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),oe()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),oe()}get recording(){return this.$$.ctx[5]}set recording(e){this.$$set({recording:e}),oe()}}const{SvelteComponent:xn,add_flush_callback:ei,append:N,attr:$,bind:ti,binding_callbacks:Wt,check_outros:ni,create_component:Ht,destroy_component:Nt,detach:ze,element:ne,flush:re,group_outros:ii,init:oi,insert:Be,listen:Je,mount_component:Ft,noop:Oe,null_to_empty:kt,safe_not_equal:ri,set_data:Ke,set_style:yt,space:Ee,text:Qe,transition_in:je,transition_out:qe}=window.__gradio__svelte__internal,{onMount:si}=window.__gradio__svelte__internal;function Dt(n){let e;return{c(){e=ne("div"),yt(e,"display",n[0]?"block":"none")},m(t,i){Be(t,e,i),n[11](e)},p(t,i){i&1&&yt(e,"display",t[0]?"block":"none")},d(t){t&&ze(e),n[11](null)}}}function li(n){let e,t,i,o=n[4]("audio.record")+"",a,r,c;return{c(){e=ne("button"),t=ne("span"),t.innerHTML='<span class="dot"></span>',i=Ee(),a=Qe(o),$(t,"class","record-icon"),$(e,"class","record-button svelte-1fz19cj")},m(s,u){Be(s,e,u),N(e,t),N(e,i),N(e,a),r||(c=Je(e,"click",n[14]),r=!0)},p(s,u){u&16&&o!==(o=s[4]("audio.record")+"")&&Ke(a,o)},i:Oe,o:Oe,d(s){s&&ze(e),r=!1,c()}}}function ai(n){let e,t,i,o,a=n[4]("audio.waiting")+"",r,c,s,u;return i=new fn({}),{c(){e=ne("button"),t=ne("div"),Ht(i.$$.fragment),o=Ee(),r=Qe(a),$(t,"class","icon svelte-1fz19cj"),$(e,"class","spinner-button svelte-1fz19cj")},m(l,d){Be(l,e,d),N(e,t),Ft(i,t,null),N(e,o),N(e,r),c=!0,s||(u=Je(e,"click",n[13]),s=!0)},p(l,d){(!c||d&16)&&a!==(a=l[4]("audio.waiting")+"")&&Ke(r,a)},i(l){c||(je(i.$$.fragment,l),c=!0)},o(l){qe(i.$$.fragment,l),c=!1},d(l){l&&ze(e),Nt(i),s=!1,u()}}}function ui(n){let e,t,i,o=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",a,r,c,s;return{c(){e=ne("button"),t=ne("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',i=Ee(),a=Qe(o),$(t,"class","record-icon"),$(e,"class",r=kt(n[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")},m(u,l){Be(u,e,l),N(e,t),N(e,i),N(e,a),c||(s=Je(e,"click",n[12]),c=!0)},p(u,l){l&18&&o!==(o=(u[1]?u[4]("audio.pause"):u[4]("audio.stop"))+"")&&Ke(a,o),l&2&&r!==(r=kt(u[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")&&$(e,"class",r)},i:Oe,o:Oe,d(u){u&&ze(e),c=!1,s()}}}function ci(n){let e,t,i,o,a,r,c,s,u,l=n[5].show_recording_waveform&&Dt(n);const d=[ui,ai,li],f=[];function b(h,y){return h[0]&&!h[6]?0:h[0]&&h[6]?1:2}o=b(n),a=f[o]=d[o](n);function k(h){n[15](h)}let D={i18n:n[4]};return n[9]!==void 0&&(D.micDevices=n[9]),c=new zt({props:D}),Wt.push(()=>ti(c,"micDevices",k)),{c(){e=ne("div"),l&&l.c(),t=Ee(),i=ne("div"),a.c(),r=Ee(),Ht(c.$$.fragment),$(i,"class","controls svelte-1fz19cj"),$(e,"class","mic-wrap svelte-1fz19cj")},m(h,y){Be(h,e,y),l&&l.m(e,null),N(e,t),N(e,i),f[o].m(i,null),N(i,r),Ft(c,i,null),u=!0},p(h,[y]){h[5].show_recording_waveform?l?l.p(h,y):(l=Dt(h),l.c(),l.m(e,t)):l&&(l.d(1),l=null);let g=o;o=b(h),o===g?f[o].p(h,y):(ii(),qe(f[g],1,1,()=>{f[g]=null}),ni(),a=f[o],a?a.p(h,y):(a=f[o]=d[o](h),a.c()),je(a,1),a.m(i,r));const p={};y&16&&(p.i18n=h[4]),!s&&y&512&&(s=!0,p.micDevices=h[9],ei(()=>s=!1)),c.$set(p)},i(h){u||(je(a),je(c.$$.fragment,h),u=!0)},o(h){qe(a),qe(c.$$.fragment,h),u=!1},d(h){h&&ze(e),l&&l.d(),f[o].d(),Nt(c)}}}function _i(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:a}=e,{record:r}=e,{i18n:c}=e,{waveform_settings:s}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{waiting:l=!1}=e,d,f,b,k=[];si(()=>{D()});const D=()=>{d!==void 0&&d.destroy(),b&&(d=Ve.create({...s,normalize:!1,container:b}),t(7,f=d.registerPlugin(Le.create())))};function h(v){Wt[v?"unshift":"push"](()=>{b=v,t(8,b)})}const y=()=>{f?.stopMic(),a()},g=()=>{a()},p=()=>{f?.startMic(),r()};function M(v){k=v,t(9,k)}return n.$$set=v=>{"recording"in v&&t(0,i=v.recording),"paused_recording"in v&&t(1,o=v.paused_recording),"stop"in v&&t(2,a=v.stop),"record"in v&&t(3,r=v.record),"i18n"in v&&t(4,c=v.i18n),"waveform_settings"in v&&t(10,s=v.waveform_settings),"waveform_options"in v&&t(5,u=v.waveform_options),"waiting"in v&&t(6,l=v.waiting)},[i,o,a,r,c,u,l,f,b,k,s,h,y,g,p,M]}class di extends xn{constructor(e){super(),oi(this,e,_i,ci,ri,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),re()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),re()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),re()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),re()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),re()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),re()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),re()}get waiting(){return this.$$.ctx[6]}set waiting(e){this.$$set({waiting:e}),re()}}let Rt;async function fi(){const{MediaRecorder:n,register:e}=await et(async()=>{const{MediaRecorder:i,register:o}=await import("./module-yLDG8S0D.js");return{MediaRecorder:i,register:o}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),{connect:t}=await et(async()=>{const{connect:i}=await import("./module-moYYmAFH.js");return{connect:i}},__vite__mapDeps([6,1]),import.meta.url);return e(await t()),Rt=n,Rt}const{SvelteComponent:mi,add_flush_callback:Ae,append:Et,attr:At,bind:Me,binding_callbacks:Se,bubble:_e,check_outros:Xe,create_component:x,create_slot:gi,destroy_component:ee,detach:pe,element:hi,empty:Vt,flush:E,get_all_dirty_from_scope:bi,get_slot_changes:pi,group_outros:Ze,init:wi,insert:we,mount_component:te,safe_not_equal:vi,space:Re,transition_in:T,transition_out:U,update_slot_base:ki}=window.__gradio__svelte__internal,{onDestroy:yi,createEventDispatcher:Di,tick:Oi}=window.__gradio__svelte__internal;function Ri(n){let e,t,i,o,a;e=new St({props:{i18n:n[13],download:n[10]?n[2].url:null}}),e.$on("clear",n[29]),e.$on("edit",n[48]);function r(s){n[49](s)}let c={value:n[2],subtitles:Array.isArray(n[5])?n[5]:n[5]?.url,label:n[6],i18n:n[13],dispatch_blob:n[27],waveform_settings:n[14],waveform_options:n[16],trim_region_settings:n[15],handle_reset_value:n[17],editable:n[18],loop:n[8],interactive:!0};return n[25]!==void 0&&(c.mode=n[25]),i=new wn({props:c}),Se.push(()=>Me(i,"mode",r)),i.$on("stop",n[50]),i.$on("play",n[51]),i.$on("pause",n[52]),i.$on("edit",n[53]),{c(){x(e.$$.fragment),t=Re(),x(i.$$.fragment)},m(s,u){te(e,s,u),we(s,t,u),te(i,s,u),a=!0},p(s,u){const l={};u[0]&8192&&(l.i18n=s[13]),u[0]&1028&&(l.download=s[10]?s[2].url:null),e.$set(l);const d={};u[0]&4&&(d.value=s[2]),u[0]&32&&(d.subtitles=Array.isArray(s[5])?s[5]:s[5]?.url),u[0]&64&&(d.label=s[6]),u[0]&8192&&(d.i18n=s[13]),u[0]&16384&&(d.waveform_settings=s[14]),u[0]&65536&&(d.waveform_options=s[16]),u[0]&32768&&(d.trim_region_settings=s[15]),u[0]&131072&&(d.handle_reset_value=s[17]),u[0]&262144&&(d.editable=s[18]),u[0]&256&&(d.loop=s[8]),!o&&u[0]&33554432&&(o=!0,d.mode=s[25],Ae(()=>o=!1)),i.$set(d)},i(s){a||(T(e.$$.fragment,s),T(i.$$.fragment,s),a=!0)},o(s){U(e.$$.fragment,s),U(i.$$.fragment,s),a=!1},d(s){s&&pe(t),ee(e,s),ee(i,s)}}}function Ei(n){let e,t,i,o;const a=[Mi,Ai],r=[];function c(s,u){return s[3]==="microphone"?0:s[3]==="upload"?1:-1}return~(e=c(n))&&(t=r[e]=a[e](n)),{c(){t&&t.c(),i=Vt()},m(s,u){~e&&r[e].m(s,u),we(s,i,u),o=!0},p(s,u){let l=e;e=c(s),e===l?~e&&r[e].p(s,u):(t&&(Ze(),U(r[l],1,1,()=>{r[l]=null}),Xe()),~e?(t=r[e],t?t.p(s,u):(t=r[e]=a[e](s),t.c()),T(t,1),t.m(i.parentNode,i)):t=null)},i(s){o||(T(t),o=!0)},o(s){U(t),o=!1},d(s){s&&pe(i),~e&&r[e].d(s)}}}function Ai(n){let e,t,i,o;function a(s){n[45](s)}function r(s){n[46](s)}let c={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[7],max_file_size:n[19],upload:n[20],stream_handler:n[21],aria_label:n[13]("audio.drop_to_upload"),$$slots:{default:[Si]},$$scope:{ctx:n}};return n[0]!==void 0&&(c.dragging=n[0]),n[4]!==void 0&&(c.uploading=n[4]),e=new cn({props:c}),Se.push(()=>Me(e,"dragging",a)),Se.push(()=>Me(e,"uploading",r)),e.$on("load",n[30]),e.$on("error",n[47]),{c(){x(e.$$.fragment)},m(s,u){te(e,s,u),o=!0},p(s,u){const l={};u[0]&128&&(l.root=s[7]),u[0]&524288&&(l.max_file_size=s[19]),u[0]&1048576&&(l.upload=s[20]),u[0]&2097152&&(l.stream_handler=s[21]),u[0]&8192&&(l.aria_label=s[13]("audio.drop_to_upload")),u[1]&16777216&&(l.$$scope={dirty:u,ctx:s}),!t&&u[0]&1&&(t=!0,l.dragging=s[0],Ae(()=>t=!1)),!i&&u[0]&16&&(i=!0,l.uploading=s[4],Ae(()=>i=!1)),e.$set(l)},i(s){o||(T(e.$$.fragment,s),o=!0)},o(s){U(e.$$.fragment,s),o=!1},d(s){ee(e,s)}}}function Mi(n){let e,t,i,o,a,r;e=new St({props:{i18n:n[13]}}),e.$on("clear",n[29]);const c=[Ci,Li],s=[];function u(l,d){return l[12]?0:1}return i=u(n),o=s[i]=c[i](n),{c(){x(e.$$.fragment),t=Re(),o.c(),a=Vt()},m(l,d){te(e,l,d),we(l,t,d),s[i].m(l,d),we(l,a,d),r=!0},p(l,d){const f={};d[0]&8192&&(f.i18n=l[13]),e.$set(f);let b=i;i=u(l),i===b?s[i].p(l,d):(Ze(),U(s[b],1,1,()=>{s[b]=null}),Xe(),o=s[i],o?o.p(l,d):(o=s[i]=c[i](l),o.c()),T(o,1),o.m(a.parentNode,a))},i(l){r||(T(e.$$.fragment,l),T(o),r=!0)},o(l){U(e.$$.fragment,l),U(o),r=!1},d(l){l&&(pe(t),pe(a)),ee(e,l),s[i].d(l)}}}function Si(n){let e;const t=n[40].default,i=gi(t,n,n[55],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){i&&i.p&&(!e||a[1]&16777216)&&ki(i,t,o,o[55],e?pi(t,o[55],a,null):bi(o[55]),null)},i(o){e||(T(i,o),e=!0)},o(o){U(i,o),e=!1},d(o){i&&i.d(o)}}}function Li(n){let e,t,i;function o(r){n[41](r)}let a={i18n:n[13],editable:n[18],recording:n[1],dispatch_blob:n[27],waveform_settings:n[14],waveform_options:n[16],handle_reset_value:n[17]};return n[25]!==void 0&&(a.mode=n[25]),e=new $n({props:a}),Se.push(()=>Me(e,"mode",o)),e.$on("start_recording",n[42]),e.$on("pause_recording",n[43]),e.$on("stop_recording",n[44]),{c(){x(e.$$.fragment)},m(r,c){te(e,r,c),i=!0},p(r,c){const s={};c[0]&8192&&(s.i18n=r[13]),c[0]&262144&&(s.editable=r[18]),c[0]&2&&(s.recording=r[1]),c[0]&16384&&(s.waveform_settings=r[14]),c[0]&65536&&(s.waveform_options=r[16]),c[0]&131072&&(s.handle_reset_value=r[17]),!t&&c[0]&33554432&&(t=!0,s.mode=r[25],Ae(()=>t=!1)),e.$set(s)},i(r){i||(T(e.$$.fragment,r),i=!0)},o(r){U(e.$$.fragment,r),i=!1},d(r){ee(e,r)}}}function Ci(n){let e,t;return e=new di({props:{record:n[28],recording:n[1],stop:n[31],i18n:n[13],waveform_settings:n[14],waveform_options:n[16],waiting:n[24]==="waiting"}}),{c(){x(e.$$.fragment)},m(i,o){te(e,i,o),t=!0},p(i,o){const a={};o[0]&2&&(a.recording=i[1]),o[0]&8192&&(a.i18n=i[13]),o[0]&16384&&(a.waveform_settings=i[14]),o[0]&65536&&(a.waveform_options=i[16]),o[0]&16777216&&(a.waiting=i[24]==="waiting"),e.$set(a)},i(i){t||(T(e.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),t=!1},d(i){ee(e,i)}}}function Pi(n){let e,t,i,o,a,r,c,s,u,l,d,f;e=new mn({props:{show_label:n[9],Icon:gn,float:n[3]==="upload"&&n[2]===null,label:n[6]||n[13]("audio.audio")}}),o=new bn({props:{time_limit:n[23]}});const b=[Ei,Ri],k=[];function D(g,p){return g[2]===null||g[12]?0:1}r=D(n),c=k[r]=b[r](n);function h(g){n[54](g)}let y={sources:n[11],handle_clear:n[29]};return n[3]!==void 0&&(y.active_source=n[3]),u=new hn({props:y}),Se.push(()=>Me(u,"active_source",h)),{c(){x(e.$$.fragment),t=Re(),i=hi("div"),x(o.$$.fragment),a=Re(),c.c(),s=Re(),x(u.$$.fragment),At(i,"class",d="audio-container "+n[22]+" svelte-1ud6e7m")},m(g,p){te(e,g,p),we(g,t,p),we(g,i,p),te(o,i,null),Et(i,a),k[r].m(i,null),Et(i,s),te(u,i,null),f=!0},p(g,p){const M={};p[0]&512&&(M.show_label=g[9]),p[0]&12&&(M.float=g[3]==="upload"&&g[2]===null),p[0]&8256&&(M.label=g[6]||g[13]("audio.audio")),e.$set(M);const v={};p[0]&8388608&&(v.time_limit=g[23]),o.$set(v);let B=r;r=D(g),r===B?k[r].p(g,p):(Ze(),U(k[B],1,1,()=>{k[B]=null}),Xe(),c=k[r],c?c.p(g,p):(c=k[r]=b[r](g),c.c()),T(c,1),c.m(i,s));const I={};p[0]&2048&&(I.sources=g[11]),!l&&p[0]&8&&(l=!0,I.active_source=g[3],Ae(()=>l=!1)),u.$set(I),(!f||p[0]&4194304&&d!==(d="audio-container "+g[22]+" svelte-1ud6e7m"))&&At(i,"class",d)},i(g){f||(T(e.$$.fragment,g),T(o.$$.fragment,g),T(c),T(u.$$.fragment,g),f=!0)},o(g){U(e.$$.fragment,g),U(o.$$.fragment,g),U(c),U(u.$$.fragment,g),f=!1},d(g){g&&(pe(t),pe(i)),ee(e,g),ee(o),k[r].d(),ee(u)}}}const Mt=44;function zi(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:a=null}=e,{subtitles:r=null}=e,{label:c}=e,{root:s}=e,{loop:u}=e,{show_label:l=!0}=e,{show_download_button:d=!1}=e,{sources:f=["microphone","upload"]}=e,{pending:b=!1}=e,{streaming:k=!1}=e,{i18n:D}=e,{waveform_settings:h}=e,{trim_region_settings:y={}}=e,{waveform_options:g={}}=e,{dragging:p}=e,{active_source:M}=e,{handle_reset_value:v=()=>{}}=e,{editable:B=!0}=e,{max_file_size:I=null}=e,{upload:P}=e,{stream_handler:F}=e,{stream_every:A}=e,{uploading:w=!1}=e,{recording:q=!1}=e,{class_name:C=""}=e,ie=null,Y="closed";const R=_=>{_==="closed"?(t(23,ie=null),t(24,Y="closed")):_==="waiting"?t(24,Y="waiting"):t(24,Y="open")},O=_=>{q&&t(23,ie=_)};let S,G="",J,K=[],de=!1,Ie=!1,m,j=[];typeof window<"u"&&k&&fi().then(_=>{m=_});const L=Di(),Q=async(_,W)=>{let ve=new File(_,"audio.wav");const Ne=await _n([ve],W==="stream");t(2,a=(await P(Ne,s,void 0,I||void 0))?.filter(Boolean)[0]),L(W,a)};yi(()=>{k&&S&&S.state!=="inactive"&&S.stop()});async function Yt(){let _;try{_=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(W){if(!navigator.mediaDevices){L("error",D("audio.no_device_support"));return}if(W instanceof DOMException&&W.name=="NotAllowedError"){L("error",D("audio.allow_recording_access"));return}throw W}_!=null&&(k?(t(36,S=new m(_,{mimeType:"audio/wav"})),S.addEventListener("dataavailable",Gt)):(t(36,S=new MediaRecorder(_)),S.addEventListener("dataavailable",W=>{j.push(W.data)})),S.addEventListener("stop",async()=>{t(1,q=!1),await Q(j,"change"),await Q(j,"stop_recording"),j=[]}),Ie=!0)}async function Gt(_){let W=await _.data.arrayBuffer(),ve=new Uint8Array(W);if(J||(t(37,J=new Uint8Array(W.slice(0,Mt))),ve=new Uint8Array(W.slice(Mt))),b)K.push(ve);else{let Ne=[J].concat(K,[ve]);if(!q||Y==="waiting")return;Q(Ne,"stream"),t(38,K=[])}}async function $e(){t(1,q=!0),L("start_recording"),Ie||await Yt(),t(37,J=void 0),k&&S.state!="recording"&&S.start(A*1e3)}function Jt(){L("change",null),L("clear"),t(25,G=""),t(2,a=null)}function Kt({detail:_}){t(2,a=_),L("change",_),L("upload",_)}async function xe(){t(1,q=!1),k&&(L("close_stream"),L("stop_recording"),S.stop(),b&&t(39,de=!0),Q(j,"stop_recording"),L("clear"),t(25,G=""))}function Qt(_){G=_,t(25,G)}function Xt(_){_e.call(this,n,_)}function Zt(_){_e.call(this,n,_)}function $t(_){_e.call(this,n,_)}function xt(_){p=_,t(0,p)}function en(_){w=_,t(4,w)}const tn=({detail:_})=>L("error",_),nn=()=>t(25,G="edit");function on(_){G=_,t(25,G)}function rn(_){_e.call(this,n,_)}function sn(_){_e.call(this,n,_)}function ln(_){_e.call(this,n,_)}function an(_){_e.call(this,n,_)}function un(_){M=_,t(3,M)}return n.$$set=_=>{"value"in _&&t(2,a=_.value),"subtitles"in _&&t(5,r=_.subtitles),"label"in _&&t(6,c=_.label),"root"in _&&t(7,s=_.root),"loop"in _&&t(8,u=_.loop),"show_label"in _&&t(9,l=_.show_label),"show_download_button"in _&&t(10,d=_.show_download_button),"sources"in _&&t(11,f=_.sources),"pending"in _&&t(32,b=_.pending),"streaming"in _&&t(12,k=_.streaming),"i18n"in _&&t(13,D=_.i18n),"waveform_settings"in _&&t(14,h=_.waveform_settings),"trim_region_settings"in _&&t(15,y=_.trim_region_settings),"waveform_options"in _&&t(16,g=_.waveform_options),"dragging"in _&&t(0,p=_.dragging),"active_source"in _&&t(3,M=_.active_source),"handle_reset_value"in _&&t(17,v=_.handle_reset_value),"editable"in _&&t(18,B=_.editable),"max_file_size"in _&&t(19,I=_.max_file_size),"upload"in _&&t(20,P=_.upload),"stream_handler"in _&&t(21,F=_.stream_handler),"stream_every"in _&&t(33,A=_.stream_every),"uploading"in _&&t(4,w=_.uploading),"recording"in _&&t(1,q=_.recording),"class_name"in _&&t(22,C=_.class_name),"$$scope"in _&&t(55,o=_.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&L("drag",p),n.$$.dirty[1]&450&&de&&b===!1&&(t(39,de=!1),J&&K)){let _=[J].concat(K);t(38,K=[]),Q(_,"stream")}n.$$.dirty[0]&2|n.$$.dirty[1]&32&&!q&&S&&xe(),n.$$.dirty[0]&2|n.$$.dirty[1]&32&&q&&S&&$e()},[p,q,a,M,w,r,c,s,u,l,d,f,k,D,h,y,g,v,B,I,P,F,C,ie,Y,G,L,Q,$e,Jt,Kt,xe,b,A,R,O,S,J,K,de,i,Qt,Xt,Zt,$t,xt,en,tn,nn,on,rn,sn,ln,an,un,o]}class Wi extends mi{constructor(e){super(),wi(this,e,zi,Pi,vi,{value:2,subtitles:5,label:6,root:7,loop:8,show_label:9,show_download_button:10,sources:11,pending:32,streaming:12,i18n:13,waveform_settings:14,trim_region_settings:15,waveform_options:16,dragging:0,active_source:3,handle_reset_value:17,editable:18,max_file_size:19,upload:20,stream_handler:21,stream_every:33,uploading:4,recording:1,class_name:22,modify_stream:34,set_time_limit:35},null,[-1,-1])}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),E()}get subtitles(){return this.$$.ctx[5]}set subtitles(e){this.$$set({subtitles:e}),E()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),E()}get root(){return this.$$.ctx[7]}set root(e){this.$$set({root:e}),E()}get loop(){return this.$$.ctx[8]}set loop(e){this.$$set({loop:e}),E()}get show_label(){return this.$$.ctx[9]}set show_label(e){this.$$set({show_label:e}),E()}get show_download_button(){return this.$$.ctx[10]}set show_download_button(e){this.$$set({show_download_button:e}),E()}get sources(){return this.$$.ctx[11]}set sources(e){this.$$set({sources:e}),E()}get pending(){return this.$$.ctx[32]}set pending(e){this.$$set({pending:e}),E()}get streaming(){return this.$$.ctx[12]}set streaming(e){this.$$set({streaming:e}),E()}get i18n(){return this.$$.ctx[13]}set i18n(e){this.$$set({i18n:e}),E()}get waveform_settings(){return this.$$.ctx[14]}set waveform_settings(e){this.$$set({waveform_settings:e}),E()}get trim_region_settings(){return this.$$.ctx[15]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),E()}get waveform_options(){return this.$$.ctx[16]}set waveform_options(e){this.$$set({waveform_options:e}),E()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),E()}get active_source(){return this.$$.ctx[3]}set active_source(e){this.$$set({active_source:e}),E()}get handle_reset_value(){return this.$$.ctx[17]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),E()}get editable(){return this.$$.ctx[18]}set editable(e){this.$$set({editable:e}),E()}get max_file_size(){return this.$$.ctx[19]}set max_file_size(e){this.$$set({max_file_size:e}),E()}get upload(){return this.$$.ctx[20]}set upload(e){this.$$set({upload:e}),E()}get stream_handler(){return this.$$.ctx[21]}set stream_handler(e){this.$$set({stream_handler:e}),E()}get stream_every(){return this.$$.ctx[33]}set stream_every(e){this.$$set({stream_every:e}),E()}get uploading(){return this.$$.ctx[4]}set uploading(e){this.$$set({uploading:e}),E()}get recording(){return this.$$.ctx[1]}set recording(e){this.$$set({recording:e}),E()}get class_name(){return this.$$.ctx[22]}set class_name(e){this.$$set({class_name:e}),E()}get modify_stream(){return this.$$.ctx[34]}get set_time_limit(){return this.$$.ctx[35]}}export{Wi as I};
//# sourceMappingURL=InteractiveAudio-D_8VTM59.js.map
