{"version":3,"file":"Index.uJNDAmZw.js","sources":["../../../../../../../vibeeditor/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { Client } from \"@gradio/client\";\n\timport { onMount, tick } from \"svelte\";\n\timport { BaseCode } from \"@gradio/code\";\n\timport { BaseMarkdown } from \"@gradio/markdown\";\n\n\texport let app: Client;\n\texport let root: string;\n\tlet prompt = \"\";\n\tlet editorWidth = 350;\n\tlet isResizing = false;\n\tlet editorElement: HTMLDivElement;\n\tlet activeTab: \"chat\" | \"code\" = \"chat\";\n\n\tlet codeValue = \"\";\n\tlet diffStats: { lines_added: number; lines_removed: number } | null = null;\n\n\tinterface Message {\n\t\ttext: string;\n\t\tisBot: boolean;\n\t\tisPending?: boolean;\n\t\thash?: string;\n\t}\n\n\tlet message_history: Message[] = [];\n\n\tlet history_elem: HTMLDivElement;\n\n\tconst scroll_to_bottom = (behavior: \"smooth\" | \"auto\" = \"smooth\"): void => {\n\t\tif (!history_elem) return;\n\t\thistory_elem.scrollTo({\n\t\t\ttop: history_elem.scrollHeight,\n\t\t\tbehavior: behavior\n\t\t});\n\t};\n\n\tlet starterQueries: string[] = [];\n\n\tconst fetchStarterQueries = async (): Promise<void> => {\n\t\tconst post = app.post_data(`${root}/gradio_api/vibe-starter-queries/`, {});\n\t\tpost\n\t\t\t.then(async ([response, status_code]) => {\n\t\t\t\tif (status_code !== 200) {\n\t\t\t\t\tthrow new Error(`Error: ${status_code}`);\n\t\t\t\t}\n\t\t\t\tconst responseData = response as {\n\t\t\t\t\tstarter_queries: string[];\n\t\t\t\t};\n\t\t\t\tstarterQueries = responseData.starter_queries;\n\t\t\t})\n\t\t\t.catch(async (error) => {\n\t\t\t\tconsole.error(\"Failed to fetch starter queries:\", error);\n\t\t\t});\n\t};\n\n\tfetchStarterQueries();\n\n\tconst submit = async (queryText?: string): Promise<void> => {\n\t\tconst textToSubmit = queryText || prompt;\n\t\tif (textToSubmit.trim() === \"\") return;\n\n\t\t// Clear diff stats when submitting new prompt\n\t\tdiffStats = null;\n\n\t\tconst userMessageIndex = message_history.length;\n\t\tmessage_history = [\n\t\t\t...message_history,\n\t\t\t{ text: textToSubmit, isBot: false }\n\t\t];\n\n\t\tconst botMessageIndex = message_history.length;\n\t\tmessage_history = [\n\t\t\t...message_history,\n\t\t\t{ text: \"Working...\", isBot: true, isPending: true }\n\t\t];\n\n\t\tawait tick();\n\t\tscroll_to_bottom();\n\n\t\tconst userPrompt = textToSubmit;\n\t\tif (!queryText) {\n\t\t\tprompt = \"\";\n\t\t}\n\n\t\tconst post = app.post_data(`${root}/gradio_api/vibe-edit/`, {\n\t\t\tprompt: userPrompt\n\t\t});\n\t\tpost\n\t\t\t.then(async ([response, status_code]) => {\n\t\t\t\tif (status_code !== 200) {\n\t\t\t\t\tthrow new Error(`Error: ${status_code}`);\n\t\t\t\t}\n\n\t\t\t\tconst responseData = response as {\n\t\t\t\t\thash: string;\n\t\t\t\t\tdiff_stats: { lines_added: number; lines_removed: number };\n\t\t\t\t\treasoning: string;\n\t\t\t\t};\n\n\t\t\t\t// Update diff stats from response\n\t\t\t\tdiffStats = responseData.diff_stats;\n\n\t\t\t\tmessage_history = message_history.map((msg, index) => {\n\t\t\t\t\tconsole.log(index, userMessageIndex, responseData.hash);\n\t\t\t\t\treturn index === userMessageIndex\n\t\t\t\t\t\t? { ...msg, hash: responseData.hash }\n\t\t\t\t\t\t: msg;\n\t\t\t\t});\n\n\t\t\t\tmessage_history = message_history.map((msg, index) =>\n\t\t\t\t\tindex === botMessageIndex\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\ttext: responseData.reasoning ? responseData.reasoning : \"Done.\",\n\t\t\t\t\t\t\t\tisBot: true,\n\t\t\t\t\t\t\t\tisPending: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: msg\n\t\t\t\t);\n\t\t\t\tawait tick();\n\t\t\t\tscroll_to_bottom();\n\t\t\t})\n\t\t\t.catch(async (error) => {\n\t\t\t\tmessage_history = message_history.map((msg, index) =>\n\t\t\t\t\tindex === botMessageIndex\n\t\t\t\t\t\t? { text: \"Error occurred.\", isBot: true, isPending: false }\n\t\t\t\t\t\t: msg\n\t\t\t\t);\n\t\t\t\tawait tick();\n\t\t\t\tscroll_to_bottom();\n\t\t\t});\n\t};\n\n\tconst handleStarterQuery = async (query: string): Promise<void> => {\n\t\tawait submit(query);\n\t};\n\n\tconst undoMessage = async (\n\t\thash: string,\n\t\tmessageIndex: number\n\t): Promise<void> => {\n\t\ttry {\n\t\t\tawait app.post_data(`${root}/gradio_api/undo-vibe-edit/`, { hash });\n\n\t\t\t// Clear diff stats when undoing\n\t\t\tdiffStats = null;\n\n\t\t\tconst messageToUndo = message_history[messageIndex];\n\t\t\tprompt = messageToUndo.text;\n\n\t\t\tmessage_history = message_history.slice(0, messageIndex);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to undo:\", error);\n\t\t}\n\t};\n\n\tconst handleResizeStart = (e: MouseEvent): void => {\n\t\te.preventDefault();\n\t\tisResizing = true;\n\t\tdocument.addEventListener(\"mousemove\", handleResizeMove);\n\t\tdocument.addEventListener(\"mouseup\", handleResizeEnd);\n\t\tdocument.body.style.cursor = \"col-resize\";\n\t\tdocument.body.style.userSelect = \"none\";\n\t};\n\n\tconst handleResizeMove = (e: MouseEvent): void => {\n\t\tif (!isResizing) return;\n\n\t\tconst minWidth = 250;\n\t\tconst maxWidth = Math.min(800, window.innerWidth * 0.5);\n\t\tconst newWidth = window.innerWidth - e.clientX;\n\n\t\teditorWidth = Math.max(minWidth, Math.min(maxWidth, newWidth));\n\n\t\t// Dispatch custom event to update the main content margin\n\t\twindow.dispatchEvent(\n\t\t\tnew CustomEvent(\"vibeEditorResize\", {\n\t\t\t\tdetail: { width: editorWidth }\n\t\t\t})\n\t\t);\n\t};\n\n\tconst handleResizeEnd = (): void => {\n\t\tisResizing = false;\n\t\tdocument.removeEventListener(\"mousemove\", handleResizeMove);\n\t\tdocument.removeEventListener(\"mouseup\", handleResizeEnd);\n\t\tdocument.body.style.cursor = \"\";\n\t\tdocument.body.style.userSelect = \"\";\n\t};\n\n\tconst fetchCode = async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst response = await fetch(`${root}/gradio_api/vibe-code/`, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/json\"\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (response.ok) {\n\t\t\t\tconst data = await response.json();\n\t\t\t\tcodeValue = data.code;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to fetch code:\", error);\n\t\t}\n\t};\n\n\tlet code_updated = false;\n\n\tconst updateCode = async (): Promise<void> => {\n\t\ttry {\n\t\t\tawait app.post_data(`${root}/gradio_api/vibe-code/`, {\n\t\t\t\tcode: codeValue\n\t\t\t});\n\t\t\tcode_updated = true;\n\t\t\tsetTimeout(() => {\n\t\t\t\tcode_updated = false;\n\t\t\t}, 1000);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to update code:\", error);\n\t\t}\n\t};\n\n\t$: app, fetchCode();\n\n\t$: if (activeTab === \"chat\") {\n\t\ttick().then(() => scroll_to_bottom(\"auto\"));\n\t}\n\n\t$: code_updated;\n\n\tfunction create_spaces_url(): void {\n\t\tconst base_URL = \"https://huggingface.co/new-space\";\n\t\tconst params = new URLSearchParams({\n\t\t\tname: \"new-space\",\n\t\t\tsdk: \"gradio\"\n\t\t});\n\t\tconst encoded_content = codeValue.trimStart();\n\t\tparams.append(\"files[0][path]\", \"app.py\");\n\t\tparams.append(\"files[0][content]\", encoded_content);\n\t\twindow.open(`${base_URL}?${params.toString()}`, \"_blank\")?.focus();\n\t}\n\n\tonMount(() => {\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"mousemove\", handleResizeMove);\n\t\t\tdocument.removeEventListener(\"mouseup\", handleResizeEnd);\n\t\t};\n\t});\n\n\t$: starterQueries;\n</script>\n\n<div\n\tclass=\"vibe-editor\"\n\tbind:this={editorElement}\n\tstyle=\"width: {editorWidth}px;\"\n>\n\t<button\n\t\tclass=\"resize-handle\"\n\t\taria-label=\"Resize sidebar\"\n\t\ton:mousedown={handleResizeStart}\n\t></button>\n\t<div class=\"tab-header\">\n\t\t<button\n\t\t\tclass=\"tab-button\"\n\t\t\tclass:active={activeTab === \"chat\"}\n\t\t\ton:click={() => (activeTab = \"chat\")}\n\t\t>\n\t\t\tChat\n\t\t</button>\n\t\t<button\n\t\t\tclass=\"tab-button\"\n\t\t\tclass:active={activeTab === \"code\"}\n\t\t\ton:click={() => (activeTab = \"code\")}\n\t\t>\n\t\t\tCode\n\t\t\t{#if diffStats && (diffStats.lines_added > 0 || diffStats.lines_removed > 0)}\n\t\t\t\t<span class=\"diff-stats\">\n\t\t\t\t\t{#if diffStats.lines_added > 0}\n\t\t\t\t\t\t<span class=\"added\">+{diffStats.lines_added}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if diffStats.lines_removed > 0}\n\t\t\t\t\t\t<span class=\"removed\">-{diffStats.lines_removed}</span>\n\t\t\t\t\t{/if}\n\t\t\t\t</span>\n\t\t\t{/if}\n\t\t</button>\n\t</div>\n\n\t<div class=\"tab-content\">\n\t\t{#if activeTab === \"chat\"}\n\t\t\t<div class=\"message-history\" bind:this={history_elem}>\n\t\t\t\t{#each message_history as message, index}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"message-item\"\n\t\t\t\t\t\tclass:bot-message={message.isBot}\n\t\t\t\t\t\tclass:user-message={!message.isBot}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"message-content\">\n\t\t\t\t\t\t\t<span class=\"message-text\">\n\t\t\t\t\t\t\t\t<BaseMarkdown\n\t\t\t\t\t\t\t\t\tvalue={message.text}\n\t\t\t\t\t\t\t\t\tlatex_delimiters={[]}\n\t\t\t\t\t\t\t\t\ttheme_mode=\"system\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{#if !message.isBot && message.hash && !message.isPending}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"undo-button\"\n\t\t\t\t\t\t\t\t\ton:click={() => undoMessage(message.hash || \"\", index)}\n\t\t\t\t\t\t\t\t\ttitle=\"Undo this change\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tUndo\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\n\t\t\t\t{#if message_history.length === 0}\n\t\t\t\t\t<div class=\"no-messages\">No messages yet</div>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if message_history.length === 0}\n\t\t\t\t\t<div class=\"starter-queries-container\">\n\t\t\t\t\t\t<div class=\"starter-queries\">\n\t\t\t\t\t\t\t{#each starterQueries as query}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"starter-query-button\"\n\t\t\t\t\t\t\t\t\ton:click={() => handleStarterQuery(query)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{query}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t{:else if activeTab === \"code\"}\n\t\t\t<div class=\"code-content\">\n\t\t\t\t<div class=\"code-editor-container\">\n\t\t\t\t\t<BaseCode\n\t\t\t\t\t\tbind:value={codeValue}\n\t\t\t\t\t\tlanguage=\"python\"\n\t\t\t\t\t\tlines={10}\n\t\t\t\t\t\tdark_mode={false}\n\t\t\t\t\t\tbasic={true}\n\t\t\t\t\t\treadonly={false}\n\t\t\t\t\t\tplaceholder=\"Enter your code here...\"\n\t\t\t\t\t\twrap_lines={true}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tclass:updating={code_updated}\n\t\t\t\t\tclass=\"update-code-button\"\n\t\t\t\t\ton:click={updateCode}\n\t\t\t\t>\n\t\t\t\t\t{#if code_updated}\n\t\t\t\t\t\tUpdated!\n\t\t\t\t\t{:else}\n\t\t\t\t\t\tUpdate Code\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"deploy-to-spaces-button\"\n\t\t\t\t\ton:click={() => create_spaces_url()}\n\t\t\t\t>\n\t\t\t\t\t<span class=\"button-content\">\n\t\t\t\t\t\tDeploy to\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclass=\"spaces-logo\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\tpreserveAspectRatio=\"xMidYMid meet\"\n\t\t\t\t\t\t\tviewBox=\"0 0 39 40\"\n\t\t\t\t\t\t\t><path\n\t\t\t\t\t\t\t\td=\"M6.3712 2.04427C3.7183 2.04427 1.56771 4.19486 1.56771 6.84776V18.3546V18.6544V32.7341C1.56771 35.3868 3.71818 37.5377 6.3712 37.5377H17.878H20.7507H32.2575C34.9104 37.5377 37.0612 35.387 37.0612 32.7341V21.6204C37.0612 20.177 36.4252 18.8839 35.4189 18.004C36.4576 16.3895 37.0612 14.4666 37.0612 12.4046C37.0612 6.68274 32.4225 2.04427 26.7007 2.04427C24.6388 2.04427 22.7159 2.64776 21.1014 3.68647C20.2214 2.6802 18.9282 2.04427 17.4849 2.04427H6.3712Z\"\n\t\t\t\t\t\t\t\tfill=\"black\"\n\t\t\t\t\t\t\t\tclass=\"stroke-white dark:stroke-white/10\"\n\t\t\t\t\t\t\t\tstroke-width=\"3.07552\"\n\t\t\t\t\t\t\t></path><path\n\t\t\t\t\t\t\t\td=\"M9.56855 23.5001C8.8406 23.5001 8.25047 24.0902 8.25047 24.8182V29.5361C8.25047 30.2641 8.8406 30.8542 9.56855 30.8542H14.2864C15.0144 30.8542 15.6045 30.2641 15.6045 29.5361V24.8182C15.6045 24.0902 15.0143 23.5001 14.2864 23.5001H9.56855Z\"\n\t\t\t\t\t\t\t\tfill=\"#FF3270\"\n\t\t\t\t\t\t\t></path><path\n\t\t\t\t\t\t\t\td=\"M24.3409 23.5001C23.613 23.5001 23.0228 24.0902 23.0228 24.8182V29.5361C23.0228 30.2641 23.613 30.8542 24.3409 30.8542H29.0588C29.7868 30.8542 30.3769 30.2641 30.3769 29.5361V24.8182C30.3769 24.0902 29.7868 23.5001 29.0588 23.5001H24.3409Z\"\n\t\t\t\t\t\t\t\tfill=\"#861FFF\"\n\t\t\t\t\t\t\t></path><path\n\t\t\t\t\t\t\t\td=\"M9.56855 8.72815C8.8406 8.72815 8.25047 9.31827 8.25047 10.0462V14.7641C8.25047 15.4921 8.8406 16.0822 9.56855 16.0822H14.2864C15.0144 16.0822 15.6045 15.4921 15.6045 14.7641V10.0462C15.6045 9.31827 15.0143 8.72815 14.2864 8.72815H9.56855Z\"\n\t\t\t\t\t\t\t\tfill=\"#097EFF\"\n\t\t\t\t\t\t\t></path><path\n\t\t\t\t\t\t\t\td=\"M26.6999 8.72815C24.6692 8.72815 23.0228 10.3744 23.0228 12.4052C23.0228 14.4359 24.6692 16.0822 26.6999 16.0822C28.7306 16.0822 30.3769 14.4359 30.3769 12.4052C30.3769 10.3744 28.7306 8.72815 26.6999 8.72815Z\"\n\t\t\t\t\t\t\t\tfill=\"#FFD702\"\n\t\t\t\t\t\t\t></path></svg\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span style=\"font-weight: 600;\">Spaces</span>\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n\n\t<div class=\"input-section\">\n\t\t<div class=\"powered-by\">Powered by: <code>gpt-oss</code></div>\n\t\t<textarea\n\t\t\ton:keydown={(e) => {\n\t\t\t\tif (e.key === \"Enter\" && !e.shiftKey) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tsubmit();\n\t\t\t\t}\n\t\t\t}}\n\t\t\tbind:value={prompt}\n\t\t\tplaceholder=\"What can I add or change?\"\n\t\t\tclass=\"prompt-input\"\n\t\t/>\n\t\t<button\n\t\t\ton:click={() => submit()}\n\t\t\tclass=\"submit-button\"\n\t\t\tdisabled={prompt.trim() === \"\"}\n\t\t>\n\t\t\tSend\n\t\t</button>\n\t</div>\n</div>\n\n<style>\n\t.vibe-editor {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tright: 0;\n\t\theight: 100vh;\n\t\tbackground: var(--background-fill-primary);\n\t\tborder-left: 1px solid var(--border-color-primary);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tz-index: 100;\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\toverflow: hidden;\n\t}\n\n\t.resize-handle {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\ttop: 0;\n\t\twidth: 4px;\n\t\theight: 100%;\n\t\tcursor: col-resize;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tborder-left: 2px solid transparent;\n\t\ttransition: border-color 0.2s ease;\n\t\tz-index: 101;\n\t\tpadding: 0;\n\t}\n\n\t.resize-handle:hover {\n\t\tborder-left-color: var(--color-accent);\n\t}\n\n\t.resize-handle:active {\n\t\tborder-left-color: var(--color-accent);\n\t\tbackground: rgba(var(--color-accent-soft), 0.1);\n\t}\n\n\t.tab-header {\n\t\tdisplay: flex;\n\t\tborder-bottom: 1px solid var(--border-color-primary);\n\t\tbackground: var(--background-fill-secondary);\n\t}\n\n\t.tab-button {\n\t\tflex: 1;\n\t\tpadding: 12px 16px;\n\t\tbackground: transparent;\n\t\tborder: none;\n\t\tborder-bottom: 2px solid transparent;\n\t\tfont-size: 14px;\n\t\tfont-weight: 500;\n\t\tcolor: var(--body-text-color-subdued);\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s ease;\n\t}\n\n\t.tab-button:hover {\n\t\tcolor: var(--body-text-color);\n\t\tbackground: var(--background-fill-primary);\n\t}\n\n\t.tab-button.active {\n\t\tcolor: var(--color-accent);\n\t\tborder-bottom-color: var(--color-accent);\n\t\tbackground: var(--background-fill-primary);\n\t}\n\n\t.tab-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\toverflow: hidden;\n\t}\n\n\t.code-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 16px;\n\t\tgap: 12px;\n\t\toverflow: hidden;\n\t}\n\n\t.code-editor-container {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\toverflow-x: hidden;\n\t\tmin-height: 0; /* Allow flex child to shrink below content size */\n\t}\n\n\t.update-code-button {\n\t\tbackground: var(--button-primary-background-fill);\n\t\tcolor: var(--button-primary-text-color);\n\t\tborder: none;\n\t\tborder-radius: var(--button-large-radius);\n\t\tpadding: 8px 16px;\n\t\tfont-weight: 600;\n\t\tcursor: pointer;\n\t\ttransition: background-color 0.2s;\n\t\talign-self: flex-start;\n\t\twidth: 100%;\n\t}\n\n\t.update-code-button.updating {\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcolor: var(--button-secondary-text-color);\n\t}\n\n\t.update-code-button:hover {\n\t\tbackground: var(--button-primary-background-fill-hover);\n\t}\n\n\t.update-code-button.updating:hover {\n\t\tbackground: var(--button-secondary-background-fill);\n\t}\n\n\t.deploy-to-spaces-button {\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcolor: var(--button-secondary-text-color);\n\t\tborder: none;\n\t\tborder-radius: var(--button-large-radius);\n\t\tpadding: 8px 16px;\n\t\tfont-weight: 600;\n\t\tcursor: pointer;\n\t\ttransition: background-color 0.2s;\n\t\talign-self: flex-start;\n\t\twidth: 100%;\n\t}\n\n\t.deploy-to-spaces-button:hover {\n\t\tbackground: var(--button-secondary-background-fill-hover);\n\t}\n\n\t.button-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tgap: 4px;\n\t\tfont-weight: 200;\n\t}\n\n\t.spaces-logo {\n\t\twidth: 1em;\n\t\theight: 1em;\n\t\tvertical-align: middle;\n\t\tdisplay: inline-block;\n\t\tmargin-right: -3px;\n\t}\n\n\t.message-history {\n\t\tflex: 1;\n\t\toverflow-y: auto;\n\t\tpadding: 16px;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t\tposition: relative;\n\t}\n\n\t.message-item {\n\t\tposition: relative;\n\t\tpadding: 12px;\n\t\tborder-radius: var(--radius-md);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tword-wrap: break-word;\n\t\tline-height: 1.4;\n\t\tborder-color: var(--border-color-primary);\n\t}\n\n\t.user-message {\n\t\tmargin-left: 20px;\n\t\tpadding: 12px 64px 12px 12px;\n\t}\n\n\t.bot-message {\n\t\tmargin-right: 20px;\n\t}\n\n\t.message-content {\n\t\tdisplay: block;\n\t}\n\n\t.message-text {\n\t\tcolor: var(--body-text-color);\n\t\tword-wrap: break-word;\n\t\tline-height: 1.4;\n\t\tflex: 1;\n\t}\n\n\t.undo-button {\n\t\tposition: absolute;\n\t\ttop: 8px;\n\t\tright: 8px;\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcolor: var(--button-secondary-text-color);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--radius-sm);\n\t\tpadding: var(--button-small-padding);\n\t\tfont-size: 12px;\n\t\tfont-weight: 500;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\t}\n\n\t.undo-button:active {\n\t\ttransform: translateY(0);\n\t}\n\n\t.no-messages {\n\t\ttext-align: center;\n\t\tcolor: var(--body-text-color-subdued);\n\t\tfont-style: italic;\n\t\tpadding: 24px;\n\t}\n\n\t.input-section {\n\t\tpadding: 16px;\n\t\tborder-top: 1px solid var(--border-color-primary);\n\t\tbackground: var(--background-fill-secondary);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 12px;\n\t}\n\n\t.prompt-input {\n\t\twidth: 100%;\n\t\tmin-height: 80px;\n\t\tbackground: var(--input-background-fill);\n\t\tborder: 1px solid var(--border-color-primary);\n\t\tborder-radius: var(--input-radius);\n\t\tpadding: 12px;\n\t\tresize: vertical;\n\t\toutline: none;\n\t\tfont-family: inherit;\n\t\tfont-size: 14px;\n\t\tcolor: var(--body-text-color);\n\t}\n\n\t.prompt-input:focus {\n\t\tborder-color: var(--color-accent);\n\t}\n\n\t.submit-button {\n\t\tbackground: var(--button-primary-background-fill);\n\t\tcolor: var(--button-primary-text-color);\n\t\tborder: none;\n\t\tborder-radius: var(--button-large-radius);\n\t\tpadding: 10px 20px;\n\t\tfont-weight: 600;\n\t\tcursor: pointer;\n\t\ttransition: background-color 0.2s;\n\t}\n\n\t.submit-button:hover:not(:disabled) {\n\t\tbackground: var(--button-primary-background-fill-hover);\n\t}\n\n\t.submit-button:disabled {\n\t\tbackground: var(--button-secondary-background-fill);\n\t\tcolor: var(--button-secondary-text-color);\n\t\tcursor: not-allowed;\n\t}\n\n\t.powered-by {\n\t\ttext-align: right;\n\t\tfont-size: 12px;\n\t\tcolor: var(--body-text-color-subdued);\n\t}\n\n\t.diff-stats {\n\t\tmargin-left: 8px;\n\t\tdisplay: inline-flex;\n\t\tgap: 4px;\n\t\tfont-size: 11px;\n\t\tfont-weight: 600;\n\t}\n\n\t.diff-stats .added {\n\t\tcolor: #22c55e;\n\t}\n\n\t.diff-stats .removed {\n\t\tcolor: #ef4444;\n\t}\n\n\t.starter-queries-container {\n\t\tposition: absolute;\n\t\tbottom: 16px;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tpadding: 16px;\n\t\tgap: 12px;\n\t\twidth: calc(100% - 32px);\n\t\tmax-width: 500px;\n\t}\n\n\t.starter-queries {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n\t\tgap: var(--spacing-md);\n\t\twidth: 100%;\n\t}\n\n\t.starter-query-button {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tpadding: var(--spacing-lg);\n\t\tborder: none;\n\t\tborder-radius: var(--radius-lg);\n\t\tbackground-color: var(--block-background-fill);\n\t\tcursor: pointer;\n\t\ttransition: all 150ms ease-in-out;\n\t\twidth: 100%;\n\t\tgap: var(--spacing-sm);\n\t\tborder: var(--block-border-width) solid var(--block-border-color);\n\t\ttransform: translateY(0px);\n\t\ttext-align: left;\n\t\tline-height: 1.4;\n\t\tword-wrap: break-word;\n\t\twhite-space: normal;\n\t\tfont-size: var(--text-md);\n\t}\n\n\t.starter-query-button:hover {\n\t\ttransform: translateY(-2px);\n\t\tbackground-color: var(--color-accent-soft);\n\t}\n\n\t.starter-query-button:active {\n\t\ttransform: translateY(0);\n\t}\n</style>\n"],"names":["ctx","create_if_block_8","create_if_block_7","insert_hydration","target","span","anchor","t1_value","dirty","set_data","t1","create_if_block_5","div1","append_hydration","div0","button0","button1","i","create_if_block_2","create_if_block_1","div","each_blocks","button","create_if_block_3","toggle_class","basemarkdown_changes","t0","t0_value","create_if_block_6","button2","div4","div3","div2","textarea","button3","app","$$props","root","prompt","editorWidth","isResizing","editorElement","activeTab","codeValue","diffStats","message_history","history_elem","scroll_to_bottom","behavior","starterQueries","response","status_code","$$invalidate","error","submit","queryText","textToSubmit","userMessageIndex","botMessageIndex","tick","userPrompt","responseData","msg","index","handleStarterQuery","query","undoMessage","hash","messageIndex","messageToUndo","handleResizeStart","e","handleResizeMove","handleResizeEnd","minWidth","maxWidth","newWidth","fetchCode","data","code_updated","updateCode","create_spaces_url","base_URL","params","encoded_content","_a","onMount","click_handler","click_handler_1","click_handler_2","message","click_handler_3","$$value","value"],"mappings":"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"}